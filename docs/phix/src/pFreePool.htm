<head>
 <body>
  <toc>
   <these>
    <get>
     <stripped>
      <h1 class="title">pFreePool</h1>
      <div id="mainSection">
       <table>
        <col style="width: 5%"/>
        <tr>
         <td>
          <b>Syntax:</b>
         </td>
         <td>
       <div id="code-snippet-1" class="codeSnippetContainer" xmlns="">
        <div class="codeSnippetContainerCodeContainer">
         <div class="codeSnippetToolBar">
          <div class="codeSnippetToolBarText">
           <a id="copytext" href="javascript:CopyToClipboard('CodeSnippetContainerCode_12a63b96-f8ab-4178-936c-8d2496d81946');">Copy</a>
          </div>
         </div>
         <div id="CodeSnippetContainerCode_12a63b96-f8ab-4178-936c-8d2496d81946" class="codeSnippetContainerCode" dir="ltr">
          <div style="color:Black;">
<!--eucode>
#ilASM{ 
    [32]
        mov eax,<raw memory address>
        mov ecx,<size that pGetPool said>
        mov edx,<era>
    [64]
        mov rax,<raw memory address>
        mov rcx,<size that pGetPool said>
        mov rdx,<era>
    []
        call :%pFreePool
      }
</eucode-->
<pre>
<font color="#000000">#</font><font color="#008080">ilASM</font><font color="#0000FF">{ </font>
<font color="#800000">    [</font><font color="#000000">32</font><font color="#800000">]</font>
<font color="#000000">        mov eax</font><font color="#0000FF">,&lt;</font><font color="#000000">raw memory address</font><font color="#0000FF">&gt;</font>
<font color="#000000">        mov ecx</font><font color="#0000FF">,&lt;</font><font color="#000000">size that pGetPool said</font><font color="#0000FF">&gt;</font>
<font color="#000000">        mov edx</font><font color="#0000FF">,&lt;</font><font color="#000000">era</font><font color="#0000FF">&gt;</font>
<font color="#800000">    [</font><font color="#000000">64</font><font color="#800000">]</font>
<font color="#000000">        mov rax</font><font color="#0000FF">,&lt;</font><font color="#000000">raw memory address</font><font color="#0000FF">&gt;</font>
<font color="#000000">        mov rcx</font><font color="#0000FF">,&lt;</font><font color="#000000">size that pGetPool said</font><font color="#0000FF">&gt;</font>
<font color="#000000">        mov rdx</font><font color="#0000FF">,&lt;</font><font color="#000000">era</font><font color="#0000FF">&gt;</font>
<font color="#800000">    []</font>
<font color="#7060A8">        call</font><font color="#0000FF"> :</font><font color="#000000">%pFreePool</font>
<font color="#0000FF">      }</font>
</pre>
          </div>
         </div>
        </div>
       </div>
         </td>
        </tr>
        <tr>
         <td>
          <b>Description:</b>
         </td>
         <td>
            Internal routine to release raw memory, counterpart to pGetPool, intended for use by the likes of pDealloc, pStack, opApnd, and pFree.
            The latter (the hll free() function) is in fact just a slim wrapper that retrieves the actual size, as saved by pAlloc, and as left
            in e/rdx by pGetPool.
            <br>
            <br>
            The <a href="html/glossary.htm#era">era</a>, or effective return address, is the value which is translated to a line number when reporting a fatal error. 
            Obviously it is much better to report errors on a line such as <code>s[i] = x</code> in preference to a <code>call :%pFreePool</code> in pDealloc 
            etc, and likewise any such errors should only occur after a rogue poke, incorrect memory allocation size, or similar.
         </td>
        </tr>
        <tr>
         <td>
          <b>On return:</b>
         </td>
         <td>
          (no specific result)
          <br>
          [32] trashes eax/ecx/edx/esi/edi
          <br>
          [64] trashes rax/rcx/rdx/rsi/rdi/r8/r9/r10/r11
         </td>
        </tr>
        <tr>
         <td>
          <b>Defined in:</b>
         </td>
         <td>builtins\VM\pHeap.e
         </td>
        </tr>
       </table>
      </div>
     </stripped>
    </get>
   </these>
  </toc>
 </body>
</head>
