<html><head><title>Edita Reference Manual</title></head>
<style type="text/css">
<!--
body    {background-color: "#D8D8D8";}
OL.n    {list-style-type: arabic-numbers }
OL.ua   {list-style-type: upper-alpha }
-->
</style>
<style>
BODY {SCROLLBAR-FACE-COLOR: #330066; SCROLLBAR-HIGHLIGHT-COLOR: #CCCCFF; 
      SCROLLBAR-SHADOW-COLOR: #CCCCFF; SCROLLBAR-3DLIGHT-COLOR: #CCCCFF; 
      SCROLLBAR-ARROW-COLOR: #FFFFFF; SCROLLBAR-TRACK-COLOR: #CCCCFF; 
      SCROLLBAR-DARKSHADOW-COLOR: #330066; }
</style>
<body>
<table WIDTH=100%>
<tr><td align="left" VALIGN=TOP WIDTH=10%>
    <td align="center" VALIGN=TOP WIDTH=80%><FONT SIZE=7><b>Edita</b></FONT>
    <td align="right" WIDTH=10%>
</table>
<p>
A free open source programmers editor / text-based IDE.<br />
Written in and primarily intended for the Phix programming language, though syntax files
are included for FASM, batch files, C, HTML/PHP, Java, and the start of one for Ruby. 
Syntax files for other programming languages are pretty easy to create and maintain.
<p>
This is the first draft of this reference manual. Some items are missing. If you see the 
word DEV it indicates something I intend to amend shortly.
<!-- there is also quite a bit of junk text in this file I intend to work through. -->
<!--
As an overwhelming concept, the idea that code should be easy to read far 
outweighs any notion that it should be easy to write. For instance, having
to write "then" and "end if" instead of "{" and "}" is a cost I, for one if
not the majority, am well prepared to pay when days, weeks, or months later
I revisit the code I have written. Hmm:

    if a=1 then
        b=True
    else
        b=False
    end if
vs.
    if a==1 {
        b=True
    }
    else {
        b=False
    }
I guess I simply cannot see any gain.

Worse cases are procs/funcs.
-->
<p>
Edita is designed to be easy, and where possible intuitive and natural to use.
It does however contain some advanced features that are not immediately obvious.
This document contains a detailed and occasionally quite technical description
of all the features of Edita. It is not necessary to read and digest all or
indeed even any of this to begin using Edita. This document is meant to be 
referred to when needed, rather than read like a book.
<p>

<h3>Contents</h3>
<!-------------->
<ul>
<li><a href=#install>Installation</a>
<li><a href=#requirements>Requirements</a>
<li><a href=#first>Running the first time</a>
<li><a href=#FileMenu>1. The File Menu</a>
    <ul>
    <li><a href=#Fnew>1.1 New</a>
    <li><a href=#Fopen>1.2 Open</a>
    <li><a href=#Fclose>1.3 Close</a>
    <li><a href=#Fsave>1.4 Save</a>
    <li><a href=#Fsaveall>1.5 Save All</a>
    <li><a href=#Fsaveas>1.6 Save As</a>
    <li><a href=#TabsList>1.7 Tabs List</a>
    <li><a href=#Print>1.8 Print, print preview, and report painter</a>
    <li><a href=#Cpub>1.9 Code Publisher</a>
    <li><a href=#Fexit>1.10 Exit</a>
    </ul>
<li><a href=#EditMenu>2. The Edit Menu</a>
    <ul>
    <li><a href=#Eundo>2.1 Undo and Redo</a>
    <li><a href=#Bookmarks>2.2 Bookmarks</a>
    <li><a href=#Fcase>2.3 Case</a>
    <li><a href=#Fclip>2.4 Clipboard</a>
    <li><a href=#Ffind>2.5 Find</a>
        <ul>
        <li><a href=#Ffind>2.5.1 Find</a>
        <li><a href=#Ffnxt>2.5.2 Find Next</a>
        <li><a href=#Ffprv>2.5.3 Find Prior</a>
        <li><a href=#Fffs>2.5.4 Find First Selected</a>
        <li><a href=#Ffns>2.5.5 Find Next Selected</a>
        <li><a href=#Ffnd>2.5.6 Find Next Difference</a>
        <li><a href=#Ffpd>2.5.7 Find Prior Difference</a>
        <li><a href=#Ffncs>2.5.8 Next Control Structure</a>
        <li><a href=#Ffpcs>2.5.9 Prior Control Structure</a>
        </ul>
    <li><a href=#Folds>2.6 Folds</a>
        <ul>
        <li><a href=#Foverview>2.6.1 Code Folding Overview</a>
        <li><a href=#Ffoldone>2.6.2 Fold selection or control block</a>
        <li><a href=#Fexpandfold>2.6.3 Expand fold</a>
        <li><a href=#Ffoldall>2.6.4 Fold all routines</a>
        <li><a href=#Fexpandall>2.6.5 Expand all folds</a>
        </ul>
    <li><a href=#Select>2.7 Select</a>
    <li><a href=#Comment>2.8 Comment and Uncomment</a>
    <li><a href=#Indent>2.9 Indent and Unindent</a>
    <li><a href=#Goto>2.10 Goto</a>
    </ul>
<li><a href=#FTP>3. The FTP Menu</a>
    <ul>
    <li><a href=#RunFTP>3.1 Run pFTP</a>
    <li><a href=#PrevFTP>3.2 Previous FTP edits</a>
    </ul>
<li><a href=#ToolMenu>4. The Tools Menu</a>
    <ul>
    <li><a href=#Bind>4.1 Bind</a>
    <li><a href=#Run>4.2 Run</a>
    <li><a href=#PRun>4.3 Parameterised Run</a>
    <li><a href=#F12>4.4 Jump to error</a>
    <li><a href=#Compare>4.5 Compare</a>
    <li><a href=#DCompare>4.6 Directory Compare</a>
    <li><a href=#Fif>4.7 Find in files</a>
    <li><a href=#reindent>4.8 Re-indent source</a>
    <li><a href=#cca>4.9 Common Code Analysis</a>
    <li><a href=#Qjump>4.10 Quick Jump</a>
    <li><a href=#Recovery>4.11 Recovery</a>
    <li><a href=#Window Painter>4.12 Window Painter</a>
    <li><a href=#tedb>4.13 Database Viewer</a>
    <li><a href=#vedb>4.14 Verify Edita.edb</a>
    <li><a href=#crash>4.15 Crash (?9/0)</a>
    <li><a href=#csh>4.16 Show Formatting</a>
    <li><a href=#ta>4.17 Translation Assistant</a>
    </ul>
<li><a href=#Macro>5. The Macro Menu</a>
    <ul>
    <li><a href=#Mtut>5.1 Introduction and tutorial</a>
    <li><a href=#mm>5.2 Macro Management</a>
    <li><a href=#Merr>5.3 Macro Error Messages</a>
    </ul>
<li><a href=#Options>6. The Options Menu</a>
    <ul>
    <li><a href=#Autocomplete>6.1 Autocomplete</a>
    <li><a href=#Background>6.2 Background Processing</a>
    <li><a href=#Colours>6.3 Colours</a>
    <li><a href=#Fonts>6.4 Fonts</a>
    <li><a href=#dopts>6.5 Display Options</a>
    <li><a href=#eopts>6.6 Edit Options</a>
    <li><a href=#Fpanel>6.7 File Panel</a>
    <li><a href=#Marea>6.8 Message Area</a>
    <li><a href=#Wrap>6.9 Wordwrap</a>
    <li><a href=#Rexerr>6.10 Reformat ex.err</a>
    </ul>
<li><a href=#Help>7. The Help Menu</a>
    <ul>
    <li><a href=#F1>7.1 Context Help</a>
    <li><a href=#CtrlF1>7.2 Keyboard Help</a>
    <li><a href=#Ehome>7.3 Edita Home Page</a>
<!-- DEV Phix! -->
    <li><a href=#Eref>7.4 Euphoria Reference Manual</a>
    <li><a href=#Manual>7.5 Manual</a>
    <li><a href=#Manual>7.6 Licence</a>
    <li><a href=#Manual>7.7 About</a>
    </ul>
<li><a href=#toolbar>8. The toolbar</a>
--DEV: the edit area, status bar, FilePanel, MessageArea
<li><a href=#synfiles>9. Syntax files</a>
<li><a href=#langfiles>10. Language files</a>
<!--li><a href=#rareities>10. Rare Events</a-->

</ul>
<p>
<a name=install></a>
<h3>Installation</h3>
<!------------------>
The Edita 
<a href="http://edita.isgreat.org">
download page</a> offers three choices:
<ul>
<li>The "full" version is a binary-only package, ideal if you already have
Phix and a gui library such as Arwen installed. Available as a zip file or a 
self-extracting windows installer.
<li>The "plus" version includes everything you should need to edit and run a 
Phix application, along with the complete source of Edita, all in one (easily 
removable) directory. This option is recommended for all first-time users 
wishing to try Edita/Phix, on the understanding that should you like it then
a separate formal installation of Phix is strongly advised.<br>
Also available as a zip file or a self-extracting windows installer.
<li>The "source" version requires that Phix be independently downloaded and
installed, but it includes a copy of Arwen. Available as a zip file only.
</ul>
<p>
The windows installers for the "full" and "plus" packages are both a single
windows executable which defaults to installing in C:\Program Files\Edita 
and requires only two clicks on the Next buttons to do so.
<p>
Later versions of the software can be installed directly over the previous 
version and in fact doing so is recommended. As usual making a backup first is 
advised, and it is probably not wise to reinstall while still actually running 
the program ;-)).
<p>
The installation process does not create any shortcuts, program groups, or 
registry entries. There is no uninstall process other than deleting the Edita
folder manually. If needed, shortcuts can be created in the usual manner by
dragging the edita.exe file from Windows Explorer onto the start button or the
windows desktop (and obviously they should be manually deleted should you later
choose to uninstall Edita).
<p>
Once installed, Edita can be run by clicking on C:\Program Files\Edita\edita.exe,
or from source by "exw edita.exw".
<p>

<p>
Other distribution options (eg the source) may require separate installation of 
<a href=http://www.phix.isgreat.org>Phix</a> 
<small>(or <a href=http://www.rapideuphoria.com>Euphoria</a>)</small>
and the use of a suitable archive extractor such as WinZip, unless installing on 
Windows XP which has the needed archive handling built-in.
<p>

<a name=requirements></a>
<h3>Requirements</h3>
<!------------------>
Edita was mostly developed, and runs quite well, on a 233MHz PII with just
48MB of memory, running the Windows 98 operating system. It has been tested 
on most versions of Windows up to XP, and on Linux under Wine.


<a name=first></a>
<h3>Running the first time</h3>
<!---------------------------->
When you first run Edita, it opens the welcome.txt file. This contains a brief
tutorial which demonstrates some of the more important features of Edita. It
also contains instructions on running your first Phix(/Euphoria) program, though 
not a full tutorial for programming in Phix(/Euphoria) (it does however include 
some pointers to where such might be found).
<p>
&nbsp;
<p>

<a name=FileMenu></a>
<h2>1. The File Menu</h2>
<!---------------------->

<a name=Fnew></a>
<h3>1.1 New</h3>
<!------------->
Creates a new document named [untitled]. Note that syntax colouring is not
available until this file is saved with a recognised file extension - 
personally I feel this is a good thing as it acts as a strong reminder to
save your work.<br>
Keyboard equivalent: Ctrl N
<p>
The New option from the File menu defaults the directory from the current 
active file tab whereas the New option on the menu raised when right clicking 
on a file tab defaults the directory from that file. (This directory only 
becomes relevant when later attempting to save the file.)

<a name=Fopen></a>
<h3>1.2 Open</h3>
<!-------------->
Shows the standard windows open dialogue. <br>
<img src="open.jpg"><br>
Filters for all the file types 
recognised by Edita are provided, built from the FileExtensions directives in 
the .syn files (see below).
Keyboard equivalent: Ctrl O
<p>
The Open option from the File menu defaults (ie starts the open dialogue window
in) the directory from the current active file tab whereas the Open option on 
the menu raised when right clicking on a file tab defaults the directory from 
that file.

<a name=Fclose></a>
<h3>1.3 Close</h3>
<!--------------->
Closes the current file, prompting if necessary to save any changes made since the 
file was last saved.<br>
Keyboard equivalent: Ctrl F4

<a name=Fsave></a>
<h3>1.4 Save</h3>
<!-------------->
Saves the current file, optionally creating an 
<a href=#aback>automatic backup</a> of the file first.<br>
Keyboard equivalent: Ctrl S


<a name=Fsaveall></a>
<h3>1.5 Save All</h3>
<!------------------>
Saves all modified files. This option is disabled unless at least one file 
other than the active filetab needs saving; if the autosave on tab switch 
option is in force, this will almost always be disabled, except for modified
"[untitled]" filetabs.

<a name=Fsaveas></a>
<h3>1.6 Save As</h3>
<!----------------->
Prompts for a different filename/directory in which to save the file contents. 
The original file (if any) is not altered in any way.

<a name=TabsList></a>
<h3>1.7 Tabs List.</h3>
<!-------------------->
This function simply lists the current open files in a listview: <br>
<img src="tabl.jpg"><br>
This may be useful when you have a fairly large number of open files,
and you know it is open but the file tab is off-screen, or "lost" in 
a multi-line tab bar, or the tab bar is disabled (display options).
<p>
Files may be sorted by name, extension, directory, size, last modified 
date and time, or record number by clicking on the column heading or 
keying Alt 1..6. You can also enter text in the Filter field to narrow 
the search. Initially, record numbers are set to match the order files
appear in the tab bar. The last selected file in this window (in the 
current session) is promoted to record number 1.

<a name=Print></a>
<h3>1.8 Print, print preview, and report painter.</h3>
<!--------------------------------------------------->
These options relate to optional non-free components, and are poorly
supported on hardware I do not have physical access to. You may prefer
to use the Code Publisher option, see below.<br>
For more details of the print preview and report generator, please refer to 
<a href="http://palacebuilders.pwp.blueyonder.co.uk/epprg.html">
http://palacebuilders.pwp.blueyonder.co.uk/epprg.html</a> which links to both 
online and zipped versions of the manual. ((SORRY, DEAD LINK))
In all probablility, Edita uses less than 1% of the functionality of that 
package, so be warned that most of that manual is not strictly relevant.<br>
Keyboard equivalent for print preview: Ctrl P


<a name=Cpub></a>
<h3>1.9 Code Publisher.</h3>
<!-------------------------->
Selecting this option creates a html-ised version of the selected text or
current file and opens the system browser to preview, publish, and/or print it.


<a name=Fexit></a>
<h3>1.10 Exit</h3>
<!------------->
Ends the editing session. Warnings may appear regarding files which have not 
been saved, or they may be saved automatically if the relevant option is set.
When Edita is restarted, if the option to do so is set, the previous files
are automatically re-opened, at the same position and with the same folds and
bookmarks.<br>
Keyboard equivalent: Alt F4
<p>
&nbsp;
<p>

<a name=EditMenu></a>
<h2>2. The Edit Menu</h2>
<!---------------------->

<a name=Eundo></a>
<h3>2.1 Undo and Redo</h3>
<!----------------------->
Undo allows the effects of previous editing actions to be undone. In some 
cases, a single editing action (eg when text is entered in Overstrike mode), 
may required several undo keystrokes to reverse. The Redo function is only ever
enabled immediately after an Undo action. Note that bookmarks and folds, as
well as actions such as find and save, are not deemed undoable in this sense.
Keyboard equivalents: Ctrl Z and Ctrl Y

<a name=Bookmarks></a>
<h3>2.2 Bookmarks</h3>
<!-------------->
A bookmark may be placed on any line by moving the cursor to it and pressing 
Ctrl F2.<br>
An asterisk indicator appears in column 1, in the Options/Colours/Bookmarks colour.
The <a href=#Fpanel>File Panel</a> documentation shows a bookmark.
<p>
If the "Permanent Fold Margin" is not set (see 
<a href=#dopts>Display Options</a>), then when the first bookmark (or fold) 
is created, all text is moved right one column to make way for the indicator. 
Likewise, when the last bookmark (or fold) is removed (and said option is not
checked), this margin is removed and all text moves left one column.
<p>
A bookmark can be removed by pressing Ctrl F2 again, when the cursor is on the 
bookmarked line.<br>
Ctrl Shift F2 removes all bookmarks.
<p>
F2 jumps to the next bookmark, if any, while Shift F2 jumps to the previous. 
Neither F2 nor Shift F2 "wrap" round the start/end of file. If there is demand, 
an option to enable such wrapping will be added.
<p>
The true indicator of a bookmark is the colour rather than an asterisk, 
as we shall see when Code Folding is discussed below.
<p>
Note that Undo/Redo (Ctrl Z and Ctrl Y) have no effect on bookmark settings, 
apart from the obvious fact that if the line of code a bookmark applies to is 
removed, then so too is the bookmark.
<p>
Bookmarks are saved between sessions, unless the file is externally modified (in which
case the message "error loading fold record" may be displayed).
<p>

<a name=Fcase></a>
<h3>2.3 Case</h3>
<!-------------->
This option is disabled unless some text is block selected.
<p>
Upper. CONVERTS TO UPPER CASE. Keyboard equivalent: Alt U<br>
Lower. converts to lower case. Keyboard equivalent: Alt L<br>
Invert. Toggles the case, eg iNVERT &lt;-&gt; Invert. Keyboard equivalent: Alt I<br>
Capitalise. Capitalises Each Word. Keyboard equivalent: Alt Shift U<br>
Sentence. Converts to sentence case. Does not understand things like proper 
nouns and acronyms, some touch-up is usually required. Keyboard equivalent: Alt Shift L
<p>

<a name=Fclip></a>
<h3>2.4 Clipboard</h3>
<!------------------->
Cut. Disabled unless some text is selected. Deletes the selected text and places it 
on the windows clipboard, replacing the previous contents of the clipboard, if any. 
Keyboard equivalent: Ctrl X
<p>
Cut append. Disabled unless some text is selected. Deletes the selected text and adds 
it to the end of the windows clipboard.
Keyboard equivalent: Ctrl Shift X
<p>
Cut prepend. Disabled unless some text is selected. Deletes the selected text and adds 
it to the start of the windows clipboard.
Keyboard equivalent: Alt Shift X
<p>
Copy. Disabled unless some text is selected. Places the selected text on the windows 
clipboard, replacing the previous contents of the clipboard, if any. 
Keyboard equivalent: Ctrl C
<p>
Copy append. Disabled unless some text is selected. Adds the selected text to the end 
of the windows clipboard.
Keyboard equivalent: Ctrl Shift C
<p>
Copy prepend. Disabled unless some text is selected. Adds the selected text to the 
start of the windows clipboard.
Keyboard equivalent: Alt Shift C
<p>
Paste. Disabled is the clipboard is empty, or contains non-text. Inserts the contents 
of the windows clipboard at the current cursor position.
Keyboard equivalent: Ctrl V
<p>
Copy filename. Places the directory path and filename of the current open file in
the clipboard.
<p>
Copy with CR. Disabled unless <a href=#Wrap>wordwrap</a> mode is on, and selected text
spans more than one screen line. Copies the selected text to the clipboard inserting 
hard returns to match the current display.
<p>
Copy w/o CR. Disabled unless <a href=#Wrap>wordwrap</a> mode is on, and selected text
spans more than one screen line. Copies the selected text to the clipboard removing
non-adjacent hard returns and inserting spaces where necessary.
<p>
Copy with html. Copies selected text or the entire file to the clipboard with html 
tags to match the current syntax colouring. (Uses the same code as Code Publisher).
<p>
Strip html. Copies selected text or the entire file to the clipboard but removes
any html tags it finds first.

<a name=Ffind></a>
<h3>2.5 Find</h3>
<!------------------->

<h4>2.5.1 Find</h4>
<!---------------->
Opens the find dialogue.<br>
<img src="efind.jpg"><br>
The fields are:
    <ul>
    <li>Find. Defaults to the currently selected text, if any, or the last search 
    key. If more than 200 characters are currently selected, the search key is 
    shortened to at most 600 bytes (if, for example, you opened win32lib, and 
    pressed Ctrl A, Ctrl F, it would otherwise try to stuff over 1MB of data 
    into this single field, typically resulting in an unspecified run-time 
    exception, somewhere in user32.dll, processing the WM_SETTEXT message).<br>
    Line breaks can be represented by "^p", tabs by "^t", and a single ^ by "^^".<br>
    Previous search keys (this session) may be selected from a drop-down list.
    <li>Replace.
    Enter the replacement text (only used if Replace/Replace All pressed).<br>
    Previous replacements (this session) may be selected from a drop-down list.
    <li>Match case, Close window when match found, Ignore whitespace. Self explanatory.
    <li>Start from top of file, Up, Down. Self explanatory.
    <li>Find next, Replace, Replace All. Self explanatory.
    </ul>
Keyboard equivalent: Ctrl F

<a name=Ffnxt></a>
<h4>2.5.2 Find Next</h4>
<!--------------------->
Finds the next occurence of the previously specified text. An error message is 
given if no previous search target has been specified, or if the end of file
is reached before it is found. Currently selected text is ignored.
Keyboard equivalent: F3

<a name=Ffprv></a>
<h4>2.5.3 Find Prior</h4>
<!---------------------->
As above, but searches backwards.
Keyboard equivalent: Shift F3

<a name=Fffs></a>
<h4>2.5.4 Find First Selected</h4>
<!------------------------------->
Uses the currently selected text, if any, as the search target and starts from the
top of file. Keyboard equivalent: Ctrl F3

<a name=Ffns></a>
<h4>2.5.5 Find Next Selected</h4>
<!------------------------------>
As above, but starting from the current cursor position.
Keyboard equivalent: Ctrl Shift F3

<a name=Ffnd></a>
<h4>2.5.6 Find Next Difference</h4>
<!-------------------------------->
Looks for the next line beginning with '>' or '<'. File compare outputs
inserted lines prefixed with '>' and deleted lines prefixed with '<'; this
feature is most useful when working with the output from that function
(which is also used in Translation Assistant). Keyboard equivalent: F4

<a name=Ffpd></a>
<h4>2.5.7 Find Prior Difference</h4>
<!-------------------------------->
As above, searching backwards. Keyboard equivalent: Shift F4

<a name=Ffncs></a>
<h4>2.5.8 Next Control Structure</h4>
<!---------------------------------->
This option is disabled unless editing a Phix(/Euphoria) source file.
<p>
Jumps forward around a control structure 
(eg if -&gt; elsif -&gt; else -&gt; end if -&gt; if...)
<p>
If the cursor is on or immediately to the right of a bracket then the cursor 
moves to the corresponding open/close bracket, if one can be found. (If the 
cursor is between two bracket characters, the match for the one on the right
is found.) Otherwise, the cursor moves to the open/closing/next control flow 
statement corresponding to the one under the cursor, or at the start of the
line, if there is one. Control flow statements are: [global|end] procedure, 
function, type, [end] if, for, while, elsif, and else.
<p>
In the case of if/elsif/else/endif, Ctrl ']' (and Ctrl Shift ']') move forwards
to the end if, and then back to the if, Ctrl '[' (and Ctrl Shift '[') move back.
In other cases, Ctrl '[' and Ctrl ']' effectively behave the same.
<p>
If the Shift key is down, then block selection occurs. This makes it easy to 
block an entire routine or control structure: place the cursor at the start of
line where the routine or control structure starts and press Ctrl Shift '['. It
may be necessary to press Shift Home or Shift End to include leading spaces or 
trailing comments, before cutting or copying the text.
<p>
Note that when matching brackets, the trailing bracket is consistently not part
of any blocked text, whereas the opening bracket may or may not be. Additional
keystrokes such as Shift left- or right-arrow, or even Escape (to cancel the 
selection), Ctrl Shift '[' (to re-block starting from the other end) and then
Shift left/right, may be required. All text between two brackets can be selected 
by starting with the cursor just to the right of the opening bracket, unless 
there is a bracket immediately after it (in which case the text is blocked to
the closing bracket for the one on the right). Pressing Ctrl Shift '[' usually 
makes it much easier to see the text between matching brackets, even if you have
no intention of copying or cutting the text.
<p>
Lastly, note that this block matching assumes the source compiles cleanly; it
will happily match up an end for statement with a while or if statement if an 
end while or end if is missing, however it will issue a warning if the "jumpto"
and the initial position are a mismatch. It should be possible to use this
feature on incomplete code, hence if there is a bracket or control structure
mismatch before the [valid] code actually being edited, it should not interfere.
<p>
If no suitable matching start/end can be found, then nothing happens.
<p>
Keyboard equivalent: Ctrl ']'


<a name=Ffpcs></a>
<h4>2.5.9 Prior Control Structure</h4>
<!----------------------------------->
Jumps backward around a control structure 
(eg if -&gt; end if -&gt; else -&gt; elsif -&gt; if...)

Keyboard equivalent: Ctrl '['

<a name=Folds></a>
<h3>2.6 Folds</h3>
<!--------------->
<a name=Foverview></a>
<h4>2.6.1 Code Folding Overview</h4>
<!--------------------------------->
Any set of lines can be folded, simply by block selecting them and pressing Ctrl -<br>
The character "&gt;" appears in column 1, in the colour specified in Options/Colours/
Linenos, with text from the first line of the folded block.
The <a href=#Fpanel>File Panel</a> documentation shows a folded routine (currFocus).
<p>
If neither "Permanent Fold Margin" nor "Display Line Numbers" is set (see 
<a href=#dopts>Display Options</a>), then when the first fold (or bookmark) 
is created, all text is moved right one column to make way for the indicator. 
Likewise, when the last fold (or bookmark) is removed (and said option is not
checked), this margin is removed and all text moves left one column.
<p>
Folds can be removed by moving the cursor onto them and pressing Ctrl + or by
clicking on the '>' in the fold margin. Folds can also be created by clicking on
the fold margin (if it is visible) next to a routine, if, for, or while block.
<p>
Undo/Redo (Ctrl Z and Ctrl Y) have no effect on (recent) code folds, with
the exception that if lines within a fold are altered, the fold is removed.
<p>
<small>
aside:
  When folding a block of selected text, if the caret is technically on (say) 
  the line following an 'end function' but in column 1, so no characters are 
  selected, the block is 'trimmed' to exclude the trailing (blank) line, and 
  similarly a blank line at the start of the block which is technically part 
  of the selection, but does not stand out as such, is also trimmed, and is 
  not deemed part of the block to be folded. This makes it more intuitive to 
  use and reduces (but does not completely eliminate) the chance of folded 
  blocks appearing as ">  ".
</small>
<p>
If there is no current selection (or it does not span multiple lines after being
trimmed), then <a href=#Ffncs>Ctrl '[' matching</a> is used to determine what, if 
anything, should be folded. For example (line numbers added for clarity):
<pre>
 6
 7 global procedure saveX(integer X)
 8   if X > lastX then
 9     LastXmove=+1
10   elsif X < lastX then
11     lastXmove=-1
12   end if
13   lastX=X
14 end procedure    
15
</pre>
If the cursor is on line 7, and Ctrl - is keyed, then Ctrl '[' matches with the 
'end procedure' on line 14 (but see gotcha below), giving:
<pre>
 6
 7 >global procedure saveX(integer X)
15
</pre>
The fold can be removed by pressing Ctrl + or clicking on the '>'
<p>
If line 7 is already (or is later) bookmarked, as well as folded, then the "&gt" character
appears in the Bookmark colour. Thus the true indicator of a fold is the "&gt" character, 
rather than the colour, ie the opposite of the true indicator of a bookmark (which is the 
colour rather than an asterisk). 
<p>
If the cursor is on say the 'v' of saveX, then 'Ctrl [' does not match anything, in 
which case 'Ctrl [' matching is re-attempted from column 1 of the current line, and
from there successfully matches the end procedure on line 14. If 
the cursor is on either '(' or ')', then 'Ctrl [' matches the other, on the 
same line, (such bracket matching will be more useful, for example, when 
editing C code) and again a second attempt at matching occurs from column 1.
However, there is a 'gotcha' as mentioned above; suppose you have:
<pre>
 7 global function create(integer objType,  -- eg Window, TabItem, etc
 8                        object label,     -- eg "Main Window"
 9                        object hBitmap,   -- from loadBitmap, loadIcon, or 0
10                        atom pID,         -- parent-id, or 0
11                        atom x,           -- x coord (relative to parent-id)
12                        atom y,           -- y coord (relative to parent-id)
13                        atom nWidth,      -- width in pixels
14                        atom nHeight,     -- height in pixels
15                        object style)     -- 0, WS_xxx, or {WS_xxx,WS_EX_xxx}
16    -- some code
    ...
73 end function
74
</pre>
Then pressing Ctrl - when the cursor is on the '(' of line 7, [or the ')' on
line 15,] folds that particular block:
<pre>
 7 >global function create(integer objType, -- eg Window, TabItem, etc
16     -- some code
     ...
73  end function
74
<small>)</small></pre>
In particular, if you have just searched for 'create', then that word will be 
block selected, effectively leaving the cursor on the '('. It is of course a 
simple matter to press Ctrl - to remove the fold, and then press Home, and 
Ctrl - again, (or press Home initially) to fold away the entire routine:
<pre>
 7 >global function create(integer objType, -- eg Window, TabItem, etc
74
<small>)</small></pre>
Hence this is not considered a problem as such, just slightly unexpected
behaviour in certain circumstances.
<p>
Going back to the first example, if the cursor is on the 'end if' on line 12, 
then lines 8 to 12 are folded (if it was on the if only the first branch would 
be folded):
<pre>
 6
 7  global procedure saveX(integer X)
 8 >  if X > lastX then
13    lastX=X
14  end procedure    
15
</pre>
Folds may also be nested, so after folding the if block as above, the procedure
can also be folded. When the procedure is unfolded, the if block remains folded. 
However it is not possible for more than one fold to either begin or end on the
same line, nor are overlapping folds permitted. Should this be detected, the
existing fold is automatically expanded before creating the new fold.
<p>
In the example above, the search for 'end procedure' scans through the if fold, 
if you see what I mean - internally it scans every line, before, in, and after
any fold in its search. If the first/matching 'end procedure' was inside an 
existing fold, then that fold would be removed automatically before the routine 
fold occured.
<p>
Note that code folds (assuming there is no multi-line block selection at the 
time) do not occur in much the same conditions that Ctrl [ and Ctrl ] do not 
find a match. Also, folds created on if, elsif, and else statements fold just 
that branch, whereas folds created on end if statements fold the entire construct.
<p>
Largely because of the ability to hide away any set of lines (comments, 
variable definitions, etc), Edita does not, unlike some other folding editors, 
attempt to display initial '-' indicators for available folds. (Not least of 
all because for an N line source, there are about (N^2)/2 possible folds, eg 
about 600,000,000 for win32lib.ew)
<p>
Folds are saved between sessions, unless the file is externally modified (in which
case the message "error loading fold record" may be displayed).
<p>

<h4>Cut, Copy, Delete, and Paste over a fold</h4>
<!---------------------------------------------->
If text is blocked over a fold and then cut or copied to the clipboard, the full
expanded text is placed on the clipboard. The clipboard does not hold/understand
code folds. Similarly block deletion or overpaste deletes the hidden text as well.
<p>

<h4>Folding all routines and Unfolding all</h4>
<!-------------------------------------------->
Press Alt - to fold all (Phix/Euphoria) routines in the current file. If the cursor 
is mid-routine, it is automatically moved to the start of the routine to permit that
to be folded as well. Note that any existing folds (such as data definitions) are 
discarded.<br>
Press Alt + to expand (remove) all current folds.
<p>

<h4>Technical details</h4>
<!----------------------->
<small>DEV: update with technical info from wordrap.txt here</small><br>
Bookmarks and folds are stored in an ordered list (bookmarks[currfile]), which contains
{type,start,end} entries. Bit #01 of type signifies a bookmark, bit #02 signifies a
fold entry. If the type is = #01, then the end is not used (but is always present to 
keep things simple). The list is ordered by ascending value of start, and may 
not contain any duplicate start or end values.
<p>
A bookmark entry may become a both bookmark and fold entry by the obvious method 
of setting bit #02 and filling in the end value; that in turn can be made into a 
fold-only entry by clearing bit #01 from the type (etc).
<p>
Unused entries (ie with type of #00) are removed from the list.
<p>
A copy of this (combined bookmarks and folds) list is saved in edita.edb, table folds,
along with copies of the start/end line texts. When the file is next opened, these
saved lines are compared against the text just loaded (ignoring space/tab differences) 
to make sure the file has not been altered externally. Additional tests are performed
to guard against corruption ("error loading fold record", "error saving fold record").
<p>
The complication this introduces (to 0.2.1) is that all line adjustments must be 
performed by a complex routine which scans up/down the set of folds. This is almost
completely embodied within the new routine adjustLine(). Other relevant routines
are getScreenLine and ensureVisible, and paintLine and paintLines have been changed
to use absolute line numbers (rather than offsets from TopLine <= 0.2.1)
<p>
There are also a large number of places where non-intuitive changes were needed,
for example in VK_LEFT processing:
<pre>
  CursorX = ExpLength(filetext[currfile][CursorY])
</pre>
became
<pre>
  CursorX = ExpLength(filetext[currfile][adjustLine(CursorY,-1)+1])
</pre>
Explanation: CursorY is 0-based, so the original line set CursorX to the end of
the previous line (with the stress being on the word previous there). In the new 
code I had to adjustLine (to move from the line just past the end of a fold to 
the start of the fold) before adding 1 to the 0-based result to index properly.
<p>
It strikes me that this array could also hold wordwrap entries, which are the logical
opposite of folds in that there are additional lines shown which do not actually
exist, as opposed to existing lines which are not actually shown. I have not thought
too deeply about this one, but it is clear that what you want are entries along the
lines of 'The last time I looked at line 387, it took me 6 physical lines to display it.'
That also matches the general rule of thumb that any change to line 387 might need all
6 lines to be redisplayed (and carry on to the end of screen should the 6 change).
<p>
Alt + and Alt - are implemented entirely in setFolds() in edita.exw.
<p>

<a name=Ffoldone></a>
<h4>2.6.2 Fold selection or control block</h4>
<!------------------------------------------->
See <a href=#Foverview>overview</a> above. Disabled for non-Phix(/Euphoria) files, 
unless the current block selection spans more than one line.
Keyboard equivalent: Ctrl -

<a name=Fexpandfold></a>
<h4>2.6.3 Expand fold</h4>
<!--------------------------------->
See <a href=#Foverview>overview</a> above. Disabled unless the cursor is on a fold start.
Keyboard equivalent: Ctrl +

<a name=Ffoldall></a>
<h4>2.6.4 Fold all routines</h4>
<!----------------------------->
See <a href=#Foverview>overview</a> above. Disabled for non-Phix(/Euphoria) files.
Keyboard equivalent: Alt -

<a name=Fexpandall></a>
<h4>2.6.5 Expand all folds</h4>
<!--------------------------------->
See <a href=#Foverview>overview</a> above. Disabled unless folds exist.
Keyboard equivalent: Alt -

<a name=Frefold></a>
<h4>2.6.6 Re-fold last expansion</h4>
<!---------------------------------->
This option allows you to expand a fold, examine the contents, and then re-fold
it without having to select or otherwise navigate unnecessarily. Note that the
"last fold" details are only remembered for the current session, not when Edita 
is re-started.
Keyboard equivalent: Ctrl Shift -

<a name=Select></a>
<h3>2.7 Select</h3>
<!---------------->
Select all (Ctrl A) and select word (Ctrl W). Self explanatory

<a name=Comment></a>
<h3>2.8 Comment and Uncomment</h3>
<!------------------------------->
Inserts (Ctrl &gt;) and removes (Ctrl &lt;) the line comment characters as 
specified in the appropriate <a href=#synfiles>syn file</a> for the file being
edited from the start of the line(s).

<a name=Indent></a>
<h3>2.9 Indent and Unindent</h3>
<!----------------------------->
Inserts (Alt &gt;) and removes (Alt &lt;) tab characters from the start of the 
line(s).

<a name=Goto></a>
<h3>2.10 Goto</h3>
<!--------------->
Jump to a specified line number, also will jump to the longest line in the 
current source. Keyboard equivalent: Ctrl G
<p>
&nbsp;
<p>

<a name=FTP></a>
<h2>3. The FTP Menu</h2>
<!--------------------->

<a name=RunFTP></a>
<h3>3.1 Run pFTP</h3>
<!------------------>
This checks for a running instance of pFTP and if one is not found it starts a
new one. It then initialises lines of communication between the two standalone
applications, effectively enabling the "Edit with Edita" menu options in pFTP.
<p>
pFTP is a normal standalone application, distributed with and able to exchange
messages with Edita. pFTP allows configuration of sites, opening a connection, 
browsing and navigating remote (as well as local) directories, and if run from
Edita, right clicking on a file and selecting "Edit with Edita".
<p>
One thing which should be common sense but is worth stressing is that pFTP
has two panes: on the Left are Local files, and on the Right are Remote files.
Right click "Edit with Edita"s on the right trigger FTP downloads and later 
automatic re-uploads when the file is saved. HOWEVER: such right clicks on 
the left pane just trigger bog-standard local edits, and when such a file is 
later saved, it is put back exactly where it should be, ie where it was found: 
locally. If you manually downloaded a remote file to a local directory, the 
only way that file is ever going to get uploaded is if and when you choose to 
do so manually.
<p>
Another way of saying this is that when pFTP is run stand-alone, its main
  job is to shunt files between the left and right panes. However that step
  is unnecessary and potentially confusing when editing files with Edita;
  if you want to edit remote files, use the right hand pane exclusively.
<p>
Note that pFTP is the "slave" in the relationship. pFTP cannot start Edita, 
but if it is already running, then manually starting Edita and selecting 
FTP/Run pFTP will initialise the lines of communication between Edita and 
the running instance of pFTP (rather than fire up a new instance, that is).
The "Edit with Edita" option is disabled until such initialisation occurs.
If you FTP/Run pFTP, then either shut down Edita or Edita crashes, pFTP
will report "Edita not responding", "Try FTP/Run pFTP to re-init comms".
The "Previous FTP edits" option automatically performs the same action as
"Run pFTP" if, as, and when needed.
<p>
A possibly nasty problem is that Edita is a Windows application and stores
directories in UPPER CASE as a deliberate mechanism to avoid opening "both"
C:\TEMP\test.txt and c:\temp\TEST.TXT, (ie the same file!). Linux and co
have case sensitive paths and filenames, which can therefore be an issue.
Put simply, Edita will record /remote/Dir/Xxx.txt as (eg) the local file
"C:\PROGRAM FILES\EDITA\FTP\" (who cares) & "REMOTE\DIR\xxx.txt" (oh!).
It, with/via pFTP, tries its level best to sort this mess out and will
succeed in the simple case, BUT if you FTP to a Linux site with more than
one of Dir, dir, dIr, diR, etc, then expect problems. (IMO that is way
the daftest thing ever about Linux, *guaranteed* to cause confusion.)
It is of course POSSIBLE to change Edita to use upper/lower on-the-fly
internally, but frankly VERY unlikely to EVER happen.
[Aside: pFTP happily allows "Home", "home", and "hOME" ids to be defined
        in Site Manager, which will probably cause similar issues.]
<p>
Finally, note that pFTP itself has no single instance handling code whatsoever,
it is Edita which checks for an existing instance and uses that (whichever it
finds first if multiple instances of pFTP are running) rather than kicking off 
a new process.


<a name=PrevFTP></a>
<h3>3.2 Previous FTP edits</h3>
<!---------------------------->
Lists files previously opened in FTP mode.<br>
<img src="prevftp.gif"><p>
<small><i>(Above shot taken on windows 98)</i></small>
If the Master Copy checkbox is checked then the file is not re-downloaded 
before opening. This may be useful, for instance, if you have had to reboot
to reset the internet connection and the last edits failed to upload. Note
that if you just want to work off-line, you are probably better off manually
downloading files and either opening them normally within Edita or using the
left hand (local) pane inside pFTP, or using say Explorer to make a working
copy of Edita\FTP\&lt;connection_name&gt;\&lt;file&gt; and editing that.
<p>
The isFTP option becomes enabled when the Master Copy flag is set. If you 
uncheck the isFTP option, then when you click OK the file is removed from 
the list. The local copy, which is now as far as Edita is concerned the one
and only copy, is still opened in the background and will need to be closed 
manually later. Such files will reappear in this list if "Edit with Edita"
is selected on a remote file in pFTP (same way they got here first).
<p>
See also <a href=#TabsList>1.7 Tabs List</a> for more (fairly obvious) 
details about sorting and selecting items in this window.
<p>


<a name=ToolMenu></a>
<h2>4. The Tools Menu</h2>
<!----------------------->

<a name=Bind></a>
<h3>4.1 Bind</h3>
<!-------------->
Interfaces to the external command-line binder/shrouder provided with 
registered versions of Euphoria. (Not suitable/updated for Phix, which 
just needs the -c flag.)
Disabled if the current open
file is not a Euphoria(/Phix) source file. An error is displayed if neither 
bind.ex (as provided with the Euphoria 2.4 registered version) nor
bind.il (as provided with the Euphoria 2.5 registered version) can be found
(in %EUDIR%\bin\).<p>
<img src="ebind.gif"><p>
<small><i>(Above shot taken on windows 98)</i></small>
<ul>
<li>Bind. Creates a standalone executable. Recommended.
<li>Shroud. Creates a single source/.il file. See below.
<li>Clear. (2.4 only) Retain routine and variable names. Recommended in most cases.
<li>List. Creates a listing of deleted and renamed routines and variables. See below.
<li>Quiet. Suppress progress messages. Of unknown value.
<li>Debug. (2.5 only) Produce readable ex.err files. Recommended in most cases.
<li>Console. (2.5 only) Creates a console application.
<li>File. Defaults to the current open file.
<li>Icon. Defaults to %EUDIR%\bin\euphoria.ico or as below.
<li>As. Permits a different output filename to be specified. See below.
<li>Command. The exact text of the command which will be run.
</ul>
If the first line (or the second if the first is exactly "--Parse:skip") of 
the current open file begins "--Bind:" or "--Shroud:" then it is used to set
defaults for the above fields. Valid options are -clear, -con, -list, -quiet,
-debug, and -icon &lt;file&gt;.ico. An output file may be specified at the
end of the line, overriding the default (the input file with the 
extension replaced by ".exe").
<p>
The shroud option has recently changed significantly:
<ul>
<li>2.4: With the clear option, you can create a single human-readable source
(which is no longer possible under 2.5). When the clear option is not set, 
the source is encrypted. The resulting file can be either a complete 
application or a component (no longer supported in 2.5).
<li>2.5: Creates a single (encrypted) .il file.
</ul>
In both 2.4 and 2.5 the resulting file is potentially cross-platform but needs
a (free) platform-specific program for it to be used (ex.exe/exw.exe/exwc.exe/eu 
in 2.4 and backend.exe/backendw.exe/backendu for the 2.5 .il files).
<p>
The clear (2.4) and debug (2.5) option should normally be checked (and are by 
default), since doing so makes bug reports far easier to follow. Theoretically 
it might be slightly easier to recreate a viable source from a bound 
application with this option set but I would not consider that a significant 
risk (apart from 2.4 shroud which as mentioned is human-readable). However you 
should check that any ex.err file produced does not contain any sensitive 
information in an overly blatent form such as "password = blahblahblah". If 
that is the case, either replace the password variable with something less
obvious, which is effectively what will happen when clear/debug is not set, 
or (better) discard or encrypt any sensitive information asap, for example 
leaving the ex.err with "password = {247998365,-16,202048,12}", which your 
program can still use but anyone else reading the ex.err file cannot.
<p>
The list option is of relatively limited practical use. It creates a file 
named deleted.txt which you can examine and judge for yourself.
<p>
I do not and have never used either the quiet or console options. You can 
find more information about these in %EUDIR%/doc/bind.doc.
<p>
It is possible to edit, or copy the command text to the clipboard for later
pasting into a batch file.
<p>
This program also demonstrates how to write a built-in interface to an external 
command-line program. If you want to invoke eg WATCOM from Edita, please examine the
source file eabind.ew.
<p>

<a name=Run></a>
<h3>4.2 Run</h3>
<!------------->
Pressing F5 attempts to execute the current open file. Files ending in "exw" 
and "ew" are run using exw.exe, files ending in "e" or "exwc" and those with 
the Capture Console output flag set (see below) are run using exwc.exe, and 
files ending in "ex" are run using ex.exe, all of which Edita locates:
<ul>
<li>using the command line that invoked Edita,
<li>in the current directory,
<li>%EUDIR%\bin,
<li>%PATH%
</ul>in that order.
<p>
Files ending in "htm", "html", and "bat" are executed using the "open" command
of ShellExecute (in shell32.dll).
<p>
If you experience any problems please try the Parameterised Run option (see below)
<p>
Edita monitors any programs it has launched, testing for failure and opening the
ex.err file if it has changed and the option to do so is set.
<p>
Edita also invokes SetForegroundWindow when it detects a program it launched has
terminated, if it is the last program lauched by Edita which is still running.
Focus will not automatically return to Edita when one or more programs launched
from it are still running. This is deliberate; the include file eama.ew allows
an application to close any existing instance of itself (provided it is a 
windows app), which can be quite helpful, for instance to close a database which
is normally opened exclusively by the application you are running/testing. In
such cases, focus should remain with the second application:
Edita should not, after detecting the termination of the first, automatically
steal focus from the instance still running/just launched. In most cases it does 
tend to get focus, just noting that there are some cases it deliberately does not.
<p>


<a name=PRun></a>
<h3>4.3 Parameterised Run</h3>
<!--------------------------->
<img src="prun.jpg"><p>
Pressing Ctrl F5 opens a simple dialogue allowing the command line to be edited.
<p>
Previously run commands may be selected from the drop-down list.
<p>
Checking the "Capture Console Output" option forces the use of exwc to
run the program (and hence a DOS box is always displayed). If possible, the
application should invoke flush(1) after each puts, print, or printf, to cause
the message to appear immediately, otherwise messages (including those before a 
getc) may be buffered until the application terminates, so the program may appear 
to have 'died' when in fact it is waiting for input.
<p>
The use of eamsg() (defined in eama.ew) instead of "Capture Console Output" is 
recommended for GUI programs.
<p>
Shift F5 uses the details last entered on this screen (even when a different file
is open).

<a name=F12></a>
<h3>4.4 Jump to error</h3>
<!----------------------->
If the current open file is neither ex.err not ctrace.out, attempts to open ex.err,
else the line under the cursor is analysed and if successful the appropriate source 
is opened, if needed, and the cursor moved to the relevant line.
<p>
Line 1 of an ex.err can almost always be successfully analysed, as can call 
stack entries (those beginning "... called from"), some Warning messages, and 
lines in the "Traced lines leading up to the failure:" section.
<p>
It is also possible to jump to the appropriate line from an ex.err file by double
clicking on a suitable line (ie one containg a filename and line number).
<p>

<a name=Compare></a>
<h3>4.5 Compare</h3>
<!----------------->
<img src="cmp.jpg"><p>
The 'source' file is shown in the window title. The directory and filename of 
the file to compare against default to the same, however a comparison is not
valid until at least one of them is changed. Previous directories that files 
have been compared against (this editing session) can be selected from a drop
down list. Files in the directory shown can be selected via the browse button.
Note that clicking on a file tab, behind the compare window (moving it if
necessary), automatically sets the directory/filename to compare against. 
This is particularly useful when a <a href=#Recovery>recovering a backup</a>.
<p>
The option to ignore whitespace should be left checked, to avoid false 
differences being reported between spaces and tabs.
<p>
The Overwrite option causes the comparison results to be written over the 
current filetab, which is obviously slightly dangerous, but any mishap can
almost always be quite easily recovered. In fairness, this option is much
more relevant to Directory Compare (see below). If not checked, the output
is placed in a new "[untitled]" file tab.
<p>
The Rename option is a little out-of-date, see Directory Compare below for
further discussion.
<p>
Once a different directory/file has been selected, the default switches from
the Browse button to the Compare button. Pressing the latter produces a text
file which lists all unchanged files as normal, deleted lines prefixed with
a '<', and inserted lines with a '>'. Each difference can be found in turn by
pressing F4.
<p>
Technical note: The core of file compare is truly excellent (all credit due to 
Wu, Manber and Myers) however gathering the needed "stack of change points" is
possibly subject to significant improvement. In eaplan9.e, if the variable
stack were to be removed, the program would be nothing less than amazingly, 
astoundingly, and astonishingly fast, (not that you can really check that if 
it does not return a verifiable result,) as opposed to the 'normally bearable' 
performance now. In truth, it works, and it works pretty darn well, even 
if I have to say so myself, but I do want to point out that particular source 
(less than 100 lines if you exclude comments) to as many eyes as possible, 
for any sensible suggestions.
<p>

<a name=DCompare></a>
<h3>4.6 Directory Compare</h3>
<!--------------------------->
<img src="dcmp.jpg"><p>
The first point to note here is the window title (quite obviously this is the
same program as used for individual file compare, and quite obviously that is
so for good reason). It starts with the word 'Directory' and shows a directory,
not a file. The second point to note is that the Filename is now a progress
indicator, not an input field.
<p>
The third thing is to discuss the rationale behind this. I distribute the full
source of Edita. You make some changes. Now, do I want:
<ol>
<li>a dozen or so smallest-possible "diff" files I might have difficultly applying,
<li>some long-winded and probably incomplete manual statement of changes,
<li>the complete, working, and testable source?
</ol>
Well, obviously the answer is 3. The complete source of Edita, including 
several support files unlikely to be modified, is currently just over 420K 
(when zipped), which ceased to be significant some time ago.
<p>
If you finish something, I want to be able to test it without running into 
problems caused by the incomplete mods I am working on (in which case I am 
unlikely to apply it immediately, but I can reply straight away that 
"it looks good"), and without running into any incompatibilities I have 
introduced in the meantime. 
Applying changes is nowhere near as easy as applying a unix-style diff, but 
this utility is designed to make it reasonably straightforward.
<p>
What this program does is take two directories and compares filename-for-filename
in each. After comparing two files, it <b>Renames</b> the second directory by
decrementing the extension, eg fred.exw becomes fred.dxw. As it stands, directory
compare simply does not work unless Rename is checked, but I will admit that this
is not exactly an ideal solution. I do plan to remove the Rename checkbox, and 
save a list of files already compared, at least in memory if not also on disk, 
but almost certainly not this year, and probably not even in 2006.
<p>
If two files prove to be identical, they are easily skipped, otherwise the 
Overwrite option comes into its own. The assumption is made that before applying 
a set of changes from a second party, it is reasonable to assume some kind of 
backup has been created. It is fair to say that Directory Compare does not really
deliver on its promise unless the Overwrite option is checked.
<p>
Assuming this, the programmer is expected to step through the changes made to
each altered file using F4, and manually select the changes needed by hand.
It is in fact a design decision that changes must be "approved" in this manner.
<p>
After accepting the changes to each file, Directory Compare should be run
again, to find the next file which has been changed, until it reports that all
files have been processed.
<p>
In summary, Directory Compare works well for small or frequent updates from 
a limited number of developers, with one person strictly in charge. However it
has to be admitted it is not intended for huge developments with hundreds of
concurrent developers. I have succesfully used this feature on numerous occasions
with Edita and previously MEditor, applying sometimes quite involved modifications
in a relatively short time (eg 20 mins), yet retaining a high confidence factor.
<p>


<a name=Fif></a>
<h3>4.7 Find in files</h3>
<!----------------------->
<img src="efif.jpg"><p>
The search string defaults to the currently selected text, if any, providing it
the selection does not span multiple lines.
<p>
An option to search based on the current project data may be added in a future
release.
<p>

<a name=reindent></a>
<h3>4.8 Re-indent source</h3>
<!-------------------------->
This option is disabled for non-Eu sources.
<p>
To test this feature, after running it on some suitable code, press and hold 
Ctrl Z until it stops (so it might be best to use a freshly opened file, rather
than one with a non-empty Ctrl Z buffer), then Ctrl Y each change back in, 
ensuring it makes sense.
<p>
This function only provides limited (user-defined) type handling. For example it
will not cope particularly well with:
<pre>
<font color="#008080">type</font><font color="#000000"> fred</font><font color="#0000FF">(..)</font><font color="#008080"> end type
procedure</font><font color="#000000"> p</font><font color="#0000FF">(</font><font color="#008080">integer</font><font color="#000000"> fred</font><font color="#0000FF">)
</font><font color="#000000">    fred</font><font color="#0000FF">=</font><font color="#000000">1
</font></pre>
or
<pre>
<font color="#008080">integer integer integer</font><font color="#0000FF">=</font><font color="#000000">1
</font></pre>
<small>(before you ask, that <i>is</i> legal Eu code, albeit rather stupid)</small>
<p>
Nor will it cope with externally defined types, eg type bool is defined in eamisc.ew
and used in edita.exw, hence running this tool on edita.exw generates the warning
"bool assumed to be external type", which I have tried to keep as unobtrusive as 
possible by merging such with final stats.
<p>
The interesting features of this function are best shown by examples from the
re-indent code itself:
<pre>
<font color="#000080">
        -- This permits expressions such as:
        --  elsif xxx
        --    and xxx
        --     or xxx
        -- rather than reformatting them to:
        --  elsif xxx
        --  and xxx
        --  or xxx
        -- This code itself is an example for Params()'s () handling.
        --
</font><font color="#008080">        if</font><font color="#0000FF"> ( </font> <font color="#000000">  line</font><font color="#FFFF00">[</font><font color="#000000">j</font><font color="#FFFF00">] </font><font color="#0000FF"> =</font><font color="#008000">'o'
</font><font color="#008080">            and</font><font color="#000000"> line</font><font color="#FFFF00">[</font><font color="#000000">j</font><font color="#0000FF">+</font><font color="#000000">1</font><font color="#FFFF00">]</font><font color="#0000FF">=</font><font color="#008000">'r'
</font><font color="#008080">            and</font><font color="#7060A8"> find</font><font color="#FFFF00">(</font><font color="#000000">line</font><font color="#800000">[</font><font color="#000000">j</font><font color="#0000FF">+</font><font color="#000000">2</font><font color="#800000">]</font><font color="#0000FF">,</font><font color="#008000">" \t"</font><font color="#FFFF00">)</font><font color="#0000FF">)
</font><font color="#008080">        or</font><font color="#0000FF"> ( </font> <font color="#000000">  line</font><font color="#FFFF00">[</font><font color="#000000">j</font><font color="#FFFF00">] </font><font color="#0000FF"> =</font><font color="#008000">'a'
</font><font color="#008080">            and</font><font color="#000000"> line</font><font color="#FFFF00">[</font><font color="#000000">j</font><font color="#0000FF">+</font><font color="#000000">1</font><font color="#FFFF00">]</font><font color="#0000FF">=</font><font color="#008000">'n'
</font><font color="#008080">            and</font><font color="#000000"> line</font><font color="#FFFF00">[</font><font color="#000000">j</font><font color="#0000FF">+</font><font color="#000000">2</font><font color="#FFFF00">]</font><font color="#0000FF">=</font><font color="#008000">'d'
</font><font color="#008080">            and</font><font color="#7060A8"> find</font><font color="#FFFF00">(</font><font color="#000000">line</font><font color="#800000">[</font><font color="#000000">j</font><font color="#0000FF">+</font><font color="#000000">3</font><font color="#800000">]</font><font color="#0000FF">,</font><font color="#008000">" \t"</font><font color="#FFFF00">)</font><font color="#0000FF">)</font><font color="#008080"> then
</font></pre>
and 
<pre>
<font color="#000080">-- allow either:
</font><font color="#008080">procedure</font><font color="#000000"> x</font><font color="#0000FF">()</font><font color="#000000">
    a</font><font color="#0000FF">=</font><font color="#000000">0
    b</font><font color="#0000FF">=</font><font color="#000000">0
</font><font color="#008080">end procedure
</font><font color="#000080">-- or:
</font><font color="#008080">procedure</font><font color="#000000"> x</font><font color="#0000FF">()</font><font color="#000000">
    a</font><font color="#0000FF">=</font><font color="#000000">0
    b</font><font color="#0000FF">=</font><font color="#000000">0
</font><font color="#008080">end procedure
</font></pre>
and
<pre>
<font color="#008080">   while</font><font color="#7060A8"> find</font><font color="#0000FF">(</font><font color="#000000">token</font><font color="#0000FF">,</font><font color="#FFFF00">{</font><font color="#008000">"and"</font><font color="#0000FF">,</font><font color="#008000">"or"</font><font color="#0000FF">,</font><font color="#008000">"xor"</font><font color="#0000FF">,
</font><font color="#008000">              "<"</font><font color="#0000FF">,</font><font color="#008000">"<="</font><font color="#0000FF">,</font><font color="#008000">"="</font><font color="#0000FF">,</font><font color="#008000">"=="</font><font color="#0000FF">,</font><font color="#008000">"!="</font><font color="#0000FF">,</font><font color="#008000">">"</font><font color="#0000FF">,</font><font color="#008000">">="</font><font color="#0000FF">,
</font><font color="#008000">              "&"</font><font color="#0000FF">,
</font><font color="#008000">              "+"</font><font color="#0000FF">,</font><font color="#008000">"-"</font><font color="#0000FF">,
</font><font color="#008000">              "*"</font><font color="#0000FF">,</font><font color="#008000">"/"</font><font color="#FFFF00">}</font><font color="#0000FF">)</font><font color="#008080"> do
</font></pre>
<p>
You can mark a section of code that you want left alone by this function using
"--#without reformat" and "--#with reformat" directives to hide ranges of lines; 
there are a couple of examples of this to be found in edita.exw [possibly just 
highlighting my personal wacky notion of inventive use of whitespace ;-&gt;].
<p>
I do understand that indentation and whitespace can be a very personal thing, so
if you have some code snippet which you feel has not been indented properly, send
me (/post on EUforum) a before and after listing.

<a name=cca></a>
<h3>4.9 Common Code Analysis</h3>
<!------------------------------>
Creates a listing file (ccaout.e) showing equivalent groups of lines of code,
with preference to the largest matching blocks, intended to help reduce code 
duplication/suggest routines that might be generally useful.
The current open file text is used, or just the selected text provided that 
it spans more than 10 lines.
<p>
Comments, whitespace (but not line breaks), and ubiquitous lines (eg "end if") are skipped.
Works on any text source and is reasonably fast, eg win32lib should complete in under a minute.
<p>
Example output:
<pre>
>9093  9148 12471 13056 14310  +      hWnd = getHandle( id )
 9094                     curStyle = w32Func( xGetWindowLong, { hWnd, GWL_STYLE })
>9095  9105               styleMask = xor_bits( #FFFFFFFF, style )
 9096    |                style = and_bits( styleMask ,curStyle )
 9097  9107  9159  9168           if style != curStyle then
 9098        9160             VOID = w32Func( xSetWindowLong,{ hWnd, GWL_STYLE, style })
</pre>
 Line 9093 matches more than 5 other lines so has a '+' in column 6.<br>
 Line 9094 does not match any other line in the source, so has no line numbers shown against it.<br>
 The start of each matching group is indicated by a '>' in column 1;
 this allows F4 to jump to the next line/group of interest.<br>
 The largest group, ({9095,9096,9097}={9105,9106,9107}) is shown in the left column.<br>
  Lines between the first and last are shown as '|' to make large groups stand out.<br>
 The second largest group ({9097,9098}={9159,9160}) is shown in the next column.<br>
  Note how it is vertically aligned.<br>
 The smallest groups are added last when filling the matching line columns, which
  are always filled left to right avoiding overlap with any previous (larger) groups.<br>
 Lastly, group analysis deliberately skips equal numbers of blank or comment-only lines.<br>
  For example if lines 9096 and 9106 were both commented out, it would still be
  reported as a group of three matching lines, unless extra comment lines are inserted
  in one and not the other. (not shown in the above example)
<p>

<a name=Qjump></a>
<h3>4.10 Quick Jump</h3>
<!-------------------->
<img src="qjump.jpg"><p>
The quick jump feature displays a list of Phix(/Euphoria) routines, or sections
in other files. Selecting an entry jumps to the appropriate line. The drop-down
list on the toolbar performs a similar function, less the All/Global/Section
and Filter capability.
<p>
If the file extension is one of e, eu, ew, ex, exu, exw, or exwc, then
the "All" radio is checked on entry, else the "Sections" radio is checked.
<p>
If applying the existing filter on entry results in an empty list, then
the filter is cleared. This is likely to happen when switching between
sources.
<p>
"All" lists procedures, functions, and types, whether they are local or global.
The routine type keyword must be on the same line as the routine name.
<p>
"Global", fairly obviously, lists only those that are global. The global
qualifier must be on the same line as the routine type and name. For example:
<pre>
    global
    procedure
    myproc()
</pre>
Will not be listed under either All or Global; although the Phix(/Euphoria) 
interpreter will ignore the linebreaks, Quick Jump will not.
<p>
"Sections" lists any line which is underlined with either dashes ("--") or equal
signs ("=="). If you want html sections to be listed, put "&lt;!----&gt;" or longer on 
the next line, starting in column 1. The actual test is whether characters 3 
to 5 (with tabs being counted as one character) are either "---" or "===", 
and the previous line is not blank and does not start with "--", and does not 
contain "end function" or "end procedure". Note that "Sections" is not really 
intended for use on program source files, and although there is no rule against 
it, just do not expect it to be very useful on files like win32lib.ew.
<p>
If you want to create sections in a Phix/Euphoria source, the recommended pattern is:
<pre>

--------------------------
 -- Some comment
--------------------------
</pre>
instead of:
<pre>

--------------------------
-- Some other comment
--------------------------
</pre>
Only "Some comment" appears, "Some other comment" does not.
<p>
To get rid of a section (eg "classBGColor[ MleText ] = w32NoColor -- COLOR_WINDOW"
is underlined in win32lib & therefore shows up as a section), insert a blank line.
<p>
Ex.err files are handled specially, using the simple test that the third 
character is one of '.', '\'. or ':', and terminating when the line
"Traced lines leading up to the failure:" is found. I would normally expect
the "All" and "Global" radios on an ex.err file to give a blank window.
<p>

<a name=Recovery></a>
<h3>4.11 Recovery</h3>
<!------------------->
<img src="ercvry.jpg"><p>
The recovery tab can be shown by selecting Tools/Recovery, or by displaying 
the File Panel (Ctrl L) and selecting the Recovery tab. 
<p>
Alphabetic entries are shown for each directory, within that an alphabetic 
list of backed-up files, and within that a list of backups of that file, most 
recent first. The treeview is automatically expanded with focus on the most 
recent backup of the currently open file. If a file (say test.exw) was saved 
as above five times on December 17th 2005, at around 2:58pm, then the backup 
list would be:
    <pre>
    5C171462.exw
    5C171461.exw
    5C171460.exw
    5C171459.exw
    5C171458.exw
    </pre>
The latest file is always listed first, even over a decade change. The 5 
denotes 2005, the C denotes 12 (December), etc. Note that minutes may be
artifically increased to ensure uniqueness. Selecting the first entry opens
the file edita/backups/5C171462.exw, next to the current filetab.
<p>
To restore a backup in its entirety, right click on the edit area after opening
the file and select Yes on the restore prompt which appears.
<p>
A new backup of the file (in the state that needed to be recovered from) will 
be made when a file restored in the above manner is subsequently saved.
<p>
A backup may also be opened solely for examination, to copy or restore only a 
selected portion, or for use with say file compare.
<p>
It is a simple matter to compare a restored file with the 'live' one:
select Tools/Compare, then click on the 'other' file tab in the background 
(doing so updates the file compare window directory and filename fields) 
and press the Compare button. Note: When used in that fashion, Overwrite 
and Rename should not be checked. The differences (if any) and all other 
lines are saved in a new [untitled] tab; press F4 to jump to the next 
inserted/deleted line. In general, a line beginning with '>' indicates an 
inserted line and '<' a deleted line, though it obviously depends heavily 
which way round they were compared, and/or it depends on whether you are 
thinking in terms of restoring the backup, or asking what has been done to 
the file since that backup was made.
<p>
It is of course generally unwise to open a backup file and start editing it;
the backup directory is regularly purged and when that happens any work would 
be lost, plus it would be difficult to test any changes made to a backup file 
with these encoded names. Edita does not specifically guard against such 
behaviour, with the sole exception of the edit area menu being replaced by a 
restore prompt, no other warnings appear.
<p>
The Recovery tree also shows details for original files which no longer exist 
(as you would probably expect).
<p>
Auutomatic backups can be disabled in <a href=#eopts>Edit Options</a>, and 
can be automatically purged a set number of days after creation.
<p>
The above screenshot also shows tabs and spaces (Ctrl Shift H toggles), and
the menus, scrollbars, and status bar have been hidden (using Shift F11 for
the menus and Options/Display for the rest).
<p>

<a name=Window Painter></a>
<h3>4.12 Window Painter</h3>
<!------------------------->
To be documented independently [DEV]

<a name=tedb></a>
<h3>4.13 Database Viewer</h3>
<!------------------------->

To be documented independently [DEV]
<!--tedb
<img src="dvdblist.jpg"><p>
Previously examined databases are listed, most recent first, Browse allows a
database not previously viewed by this program to be added to the list.
<p>
--
-- tedb.exw
--
--  Tailorable Euphoria/Phix Database Browser
--  Author: Pete Lomax
--
--  A short (ish) and simple (ish) program to display the contents of euphoria 
--  database files (.edb)
--
-- Features:
--  Designed to work "out of the box", with details (columns) added as needed.
--  Selecting a database lists the tables, and then you can either Define the
--   Columns for that table (see the Help button on the window that appears),
--   or selecting a table lists the data.
--  All columns can be sorted, resized, and even reordered.
--  Resizing the detail window proportionally resizes the columns to fit the 
--   new size, unless the Alt key is depressed, which can be much easier if 
--   you want to expand one column only.
--  Note that space is reserved for a vertical scrollbar on the right.
--  The detail view window size and column widths are automatically saved.
--  Records can be deleted from the detail view by pressing Delete.
--  Entire tables can also be deleted from the Select Table window.
--
-- Further tailoring:
--  If a column definition has a fourth element (a unique string), then
--  the format() function below is invoked to apply special formatting.
--  Two examples are given:
--  "date" applies a custom sprintf to the data
--  "dir" performs a cached lookup on a secondary table.
--  All you need to do is:
--   1) modify format() below to cope with "somecode" (try to make sure
--   it fails gracefully if passed bad data),
--   2) specify eg ..,{"Details",0,0,"somecode"},.. in column definition
--  (which you do at run-time, via the Define Columns button).
--
-- This program is, for the most part, designed to work with uniform data.
-- For example, if you have a customer table, containing:
--  a key of 0 to hold the next valid customer number (1 field),
--  retail customer records which have 54 fields, and 
--  trade customers with 79 fields,
-- Then don't expect Column Definitions to work! In such cases, you should
-- just leave column definitions well alone, the default mode of {key,data} 
-- will have to suffice. Of course if the 0 key was moved to a "system"
-- table, and the 25 extra fields for trade customers also moved, then you
-- would have consistent data for which you could define column headings.
-- Each table can of course be different, and you can leave any "mixed data" 
-- tables to the default display.
--
-- Fine points:
--  There is a raw view option which forces the record details to display
--  as Key,Data; this may be helpful if the column definitions are out of
--  date, omit data, or cause crashes, etc.
--  There are options to mark the key or the data as simple strings (as
--  opposed to lots of columns with one character in each!).
--  There is also an option to show more detail for the current record
--  below the listview, it it is too wide to fit in the columns.
--
-- Possible additions:
--
--  Add retry logic around DB_LOCK_EXCLUSIVE, and/or only resort to that
--  when actually updating the files. The files should be closed as often
--  as possible, as well.
--
--
-- Not planned:
--  Database and table creation. It is not hard (this program does it, see
--  initDatabases), and you should not need to run a separate setup utility 
--  before you can run an application.
--  Multimedia type data - blocks of text, images etc.
--  Getting rid of the space reserved on the right for a scrollbar, in
--   those cases when we don't actually need it.
--
    void = messageBox("Defining columns",
    "Enter a sequence as follows:\n\n"&
    "Each column can be a single text string,\n\n"&
    " eg {\"Uniq\",\"Name\",\"Description\",\"Date\",\"Type\"} defines 5 columns\n\n"&
    "or a sequence of up to four elements:\n"&
    " The text heading,\n"&
    " A width, which is used proportionally,\n"&
    " The alignment, which should be:\n"&
    "   0 for left-aligned, 1 for right-aligned, or 2 for a centred column.\n"&
    " A unique format code, handled by format() in tedb.exw.\n\n"&
    "  eg {{\"Directory\", 102,0}, {\"FileName\", 107,0}, {\"Date\", 43,2,\"date\"}}\n\n"&
    " Columns are assumed from the record key/data. For example if the key\n"&
    " is an atom, it occupies column 1, elsif length(key)=3 then the key part\n"&
    " populates columns 1 to 3, with the remainder from the data part.\n"&
    " If the key or data part is a [single] string, check the box accordingly,\n"&
    " otherwise you might get one character per column. Check Show details if\n"&
    " the data is too long to fit in one line.\n\n"&
    "TIP: Leave column widths 0 and adjust them in the detail view\n"&
    " using the mouse. The recalculated column widths are saved, along\n"&
    " with the new window position/size, when the window is closed.\n"&
    "TIP2: If you amend tedb.edb and browse the columns table, you can\n"&
    " press Ctrl C to copy the column definition of an existing database.\n"&
    " You can then select or delete all the text in the column definition\n"&
    " window and paste.",0)
-->

<a name=vedb></a>
<h3>4.14 Verify Edita.edb</h3>
<!--------------------------->
The edita.edb file holds information about directories, files, include 
statements, global routines, bookmarks, folds, and backups.
This utility performs the following tasks:
<ul>
<li>run full background scan (optional, may take several minutes).
    Edita begins re-examining all the files it knows of to reload globals
    and include file information. During this phase, the title bar of Edita 
    is updated to show the file number currently being processed.
    This is the 'sledgehammer to crack a walnut' option and should not be
    required in most cases. One of the flaws in Edita's file scanning is 
    that if you save a file with global routine x in it, Edita will think
    it is still there, forever or until this is run (or edita.edb deleted).
<li>shut down Edita.
    If it stalls on this point, check for a hidden prompt (eg 'save?').
    This is necessary to clear internal caches, and to stop background
    processing from attempting to update the db during this process.
    The last step is to automatically restart Edita.
<li>purge details of deleted backups.
    When edita makes a backup, it saves a four-byte unique id against the
    original file; If files in edita/backups are deleted (eg using Explorer,
    which is recommended whenever you make a proper (manual) backup, or release
    a new version, etc) then these refs remain with no corresponding file.
    This phase removes these 'dangling' references.
    Files found in the edita/backup directory with no corresponding reference
    are listed. If this happens, the listed files should be moved/deleted by 
    hand (or just left there if you prefer, they will not be harmed).
<li>purge details of deleted files with no backups.
    If no file and no backup then be gone. Moving this to Edita means adding
    an additional startup delay, at least that would be the easy way.
<li>remove gaps in unique file numbers.
    Edita assumes they are contiguous. Repeatedly 'moves' last file no into
    first gap. Moving this to Edita means adding an additional startup delay.
<li>remove unused directory entries.
    Ditto. These two phases can be thought of as repairing the damage left
    by the immediately preceding purge phase.
<li>cross-check include info.
    Checks that the 'include' details match the 'included by' details.
    Note that Edita rebuilds the 'include' details whenever you save a
    file (via background processing). This program does not verify that
    the include information is correct. If you have several files which
    are rarely modified, this program may report new errors when they
    are next modified. At some point this code may be migrated to the
    background processing of Edita so that a more thorough cleanup can
    be performed, if there is sufficient demand. This information is 
    used to build the project tree; this phase corrects errors in the
    '..' entry only.
<li>purge details of deleted global symbols.
    Removes details of global symbols originally found in files which
    no longer exist. Again, part of this code may need to be migrated to 
    the background processing of Edita so that a more thorough cleanup
    can be performed, if there is sufficient demand.
<li>restart Edita
</ul>
If edita.edb is deleted (or renamed), then Edita will rebuild it the next time
it is started, but without any bookmark, fold, or backup information. Naturally
Edita should not be running if you decide to take this rather drastic step.
<p>
The program (vedb.exw) can also be run stand-alone. In this case, the first,
second, and last phases are omitted.
<p>
For comparison purposes, here, on a slow machine checking a database covering 
450-odd files over 50+ directories with about 1850 global routines, and if not 
finding anything much to be fixed, a full background scan takes approximately 
two minutes, the verification process completes in around ten seconds, apart 
from shutting down and restarting Edita, which may take longer than actually 
running the program. Removing details of a test copy of the Edita sources, 
that had been physically deleted prior to running the program, took about 90 
seconds.
<p>

<a name=crash></a>
<h3>4.15 Crash (?9/0)</h3>
<!----------------------->
Using this option will terminate the editor, discarding all recent modifications.
A confirmation dialogue is shown with Cancel (ie resume editing) as the default.
This option may be needed, as a last resort, if you encounter a problem which is
difficult to reproduce. It will produce a text file called ex.err, typically
around 120K, which can safely be deleted. Please use this only when requested.
<p>
This option can be removed, as can all other menu entries, by changing the 
appropriate line in elng_XXX.txt to:
<p>
"Crash (?9/0)" = ""
<p>
There is however no mechanism as yet for preserving such changes when a new
version of the software is installed.


<a name=csh></a>
<h3>4.16 Show Formatting</h3>
<!-------------------------->
When checked, spaces, tabs, and line breaks are shown. An example of this can be
seen in the <a href=#Recovery>recovery screenshot</a>.


<a name=ta></a>
<h3>4.17 Translation Assistant</h3>
<!-------------------------------->
Use this option to create or update a foreign language definition file.
Press F4 to find the next new/amended line, and when all have been
processed, save the file and restart Edita.
<p>
Note that the extended text entries _F1HELP and _VEDB are skipped.
<p>
&nbsp;
<p>

<a name=Macro></a>
<h2>5. The Macro Menu</h2>
<!----------------------->
<a name=Mtut></a>
<h3>5.1 Introduction and tutorial</h3>
<!----------------------------------->

Macros allow keystrokes to be recorded and played back. It really is a simple 
record and playback feature; if you were expecting something like VBA (Visual 
Basic for Applications) then maybe you should think again.
<p>
The function keys F6, F7, F8, and F9 are reserved for playing back previously 
recorded keystrokes. These keys should be thought of as "registers"; saving, 
loading, defaulting, copying/swapping and editing the settings for these keys 
is covered in the next section, Macro management. For the remainder of this 
section, all references to F8 imply the same for F6, F7, & F9.
<p>
The undo function (Ctrl Z) can be used if a macro does something undesired to
the source file, though for a long macro you may need to key it several times.
<p>
Ctrl F8 begins recording a macro for the F8 key, discarding any previous keys.<br>
If Ctrl F8 is pressed again, macro recording stops. Attempting to record a
second/different key while still recording the first gives an error message.<br>
If F8 is pressed while recording, further recording stops, and the macro is 
replayed immediately.<br>
One macro can invoke another, but to avoid infinite
recursion, the function key invoked must be numerically lower than the one
currently being recorded. See also the Swap command in the next section.<br>
If Shift F8 is pressed, any recording in progress stops, and the macro
management screen is shown (see next section).
<p>
Creating macros is definitely a bit of an art form and requires some practice,
but can make otherwise tedious jobs much quicker. Possibly the real trick is 
to take very special care over where the cursor ends up. One thing I should
point out now is that if you are not well acquainted will all the keystrokes
normally used to select text, jump to the next word, and so on, then the rest
of this section will probably not make a great deal of sense to you. 
Most useful macros end with F3 (find next, if you needed to be told that I
suggest you skip this section) or similar cursor movement.
<p>
First, a very simple example:
<ol>
<li> press Ctrl F8 to begin recording.
<li> type something, eg fred, followed by Return.
<li> press F8 to <ol><li> stop recording, and
           <li> replay the macro immediately.</ol>
<li> press F8 a few more times.
</ol>
The screen should look something like this:
<pre>
something, eg fred,
something, eg fred,
something, eg fred,
something, eg fred,
something, eg fred,
something, eg fred,
something, eg fred,
</pre>
(if you weren't quite so literal and got several lines of fred, that's OK too.)
<p>
For the next example, we have several nested if statements and we want to 
make it a bit clearer what each end if means, by converting:
<pre>
    if a=1 then
    if b=1 then
    end if
    end if
</pre>
to:
<pre>
    if a=1 then
    if b=1 then
    end if -- b=1
    end if -- a=1
</pre>
I suppose the first thing is to realise that this can be done in a purely
mechanical fashion, by repeating the same set of keystrokes over and over.
<p>
The next task is to decide what would be a good thing to search for, and/or
where would a good place to start and end each iteration. "then" is a good
target in this case, much better than "if" which could make things confusing.
(A target of "end if^p" is also a possibility and would allow a macro to be
recorded which only applies to uncommented if statements, but I shall leave 
that as an exercise for the reader to figure out.)
<p>
We start by block selecting "then" (forwards, the way it would be blocked if
we had just searched for it, rather than starting with the cursor to the 
right of the 'n' and blocking backwards to the 't').
<p>
Start recording by pressing Ctrl F8.
<p>
There is a handy little trick to starting a macro which really comes into
its own when it is replayed at a later date.<br>
Press Ctrl F, Escape to "log" the search target ("then") against the macro.<br>
Now press Ctrl Left (or the keys needed to get to the start or just before the search target) followed
by F3.<br>
What this does is ensure the macro always starts on the desired 
search key, without this, it is all to easy to load a macro and run it
without realising the cursor is in column 1.
<p>
Move the cursor to the end of the condition by pressing Ctrl Left, Left.
<p>
Block select to the start of the condition by pressing Shift Home, and
    Ctrl Shift Right twice, then press Ctrl C to copy it ("a=1").
<p>
Move back to the opening 'if' (any of Left, Ctrl Left, or Home will do), 
 press Ctrl '[' to locate the corresponding "end if", type " -- ", and 
 then Ctrl V to paste ("a=1").
<p>
Now get back to the opening 'if' by pressing Home followed by Ctrl ], 
 and move past the "then" we just processed by pressing End, or Downarrow.
<p>
Finally, key F3 to find the next "then" (which is still the default
 search target) and stop recording by pressing Ctrl F8.
<p>
You can now process subsequent (and nested) if statements in the same
manner just by pressing F8. Note that this macro will not work properly
on if statements whose condition spans multiple lines (not sure if that is
possible, left as an excercise for the reader), plus it will find "then"
inside comments, though you can press F8 on those it will work on and F3 
to skip those it will not, which is a very common idiom when playing back macros.
<p>
I should probably note that Ctrl [ and Ctrl ] only work when editing files 
with the extensions specified in Euphoria.syn. (Phix also uses "Euphoria.syn"
for historial/compatibility reasons, btw.) I have also been quite specific in 
the use of those keys to avoid any elsif/else lines.
<p>
As a final example, I often need to convert text such as:
<pre>
    dopts   = create(Window,  xl("Display Options"),        0,Main, 272,149,405,355,0)
    showpth = create(CheckBox,xl("Show full path in title bar"),0,dopts, 15, 15,200,20,0)
    toolbar = create(CheckBox,xl("Tool Bar"),       0,dopts, 15, 40,200,20,0)
    tabbar  = create(CheckBox,xl("Tab Bar"),        0,dopts, 15, 65,200,20,0)
    mltabs  = create(CheckBox,xl("Multiline Tabs"), 0,dopts, 30, 90,200,20,0)
    sdtb    = create(CheckBox,xl("Single Dir Tab Bar"),     0,dopts, 30,115,200,20,0)
    hsb = create(CheckBox,xl("Horizontal Scroll Bar"),      0,dopts, 15,140,200,20,0)
    vsb = create(CheckBox,xl("Vertical Scroll Bar"),        0,dopts, 15,165,200,20,0)
    psb = create(CheckBox,xl("Permanent Scroll Bars"),      0,dopts, 15,190,200,20,0)
    sbar    = create(CheckBox,xl("Status Bar"),     0,dopts, 15,215,200,20,0)
    pfm = create(CheckBox,xl("Permanent Fold Margin"),      0,dopts, 15,240,200,20,0)
</pre>
to:
<pre>
"Display Options" = "Display Options"
"Show full path in title bar" = "Show full path in title bar"
"Tool Bar" = "Tool Bar"
"Tab Bar" = "Tab Bar"
"Multiline Tabs" = "Multiline Tabs"
"Single Dir Tab Bar" = "Single Dir Tab Bar"
"Horizontal Scroll Bar" = "Horizontal Scroll Bar"
"Vertical Scroll Bar" = "Vertical Scroll Bar"
"Permanent Scroll Bars" = "Permanent Scroll Bars"
"Status Bar" = "Status Bar"
"Permanent Fold Margin" = "Permanent Fold Margin"
</pre>
(it happens to be something I often need to do to maintain elng_ENG.txt)
<p>
The full text of a macro that will do just that is given in the next section.
<p>
Actions which are not [currently] supported in macros include:
<ul>
<li>Clipboard operations outside the main window,
<li>File open/close/save as (Ctrl S is allowed, but not on [untitled] tabs),
<li>Print, print preview, and Exit,
<li>Fold all routines/expand all routines,
<li>Goto Line,
<li>Alt cursor keys to the Project, Directory, or Recovery panels,
     and indeed most things you can do with them.
<li>Column selection (Alt cursor keys),
<li>Mouse actions other than clicking on buttons and menus,
<li>Tools, Options, and Help menu entries.
</ul>
Macro playback should never pop up a dialog (except Find, which is handled specially),
if it does it will go wrong.
<p>
Some of the options on the Find window may not work:
<ul>
<li>Using the cursor keys (etc) on find history records the exact text
    searched for, rather than "next in list" etc,
<li>Replace and Replace all are not supported (I suggest using F3/paste),
<li>Changing Match Case and Ignore Whitespace may cause problems, as may
    leaving Close window when match found unchecked.
</ul>

<a name=mm></a>
<h3>5.2 Macro Management</h3>
<!-------------------------->
<img src="mm.jpg"><p>
This window is displayed when Shift F8 (or F6, F7 or F9) is keyed. When a 
macro is recorded in F6..F9, it only exists in memory and is discarded at 
the end of the edit session; this window is the only way that permanent
copies of macros can be made.
<p>
The current values of F6, F7, F8, and F9 are displayed, each with a check
box against it. These boxes can be toggled by pressing the corresponding 
function key. Below this is a list of previously saved macros, and at the
bottom are buttons labelled Load, Overwrite, Delete, Swap, and OK.
<p>
If one, and only one, of the checkboxes is ticked, and
  an entry in the listview is selected the Load and Overwrite buttons are
  enabled, though as shown above the Overwrite button is not enabled if
  the selected function key is empty. These buttons copy macro details 
  from the permanent (listview) area to the "registers" F6..F9 (Load) 
  and vice versa (Overwrite).
<p>
If exactly two of the checkboxes are ticked, the Swap button is enabled:

  The simplest way to prevent mutual recursion in macros (otherwise they
  would loop forever, or until they ran out of memory) is to prevent low 
  number keys from calling higher numbered keys (or themselves):
<pre>
     -  ---Can call---
    Key F6  F7  F8  F9
    F6  no  no  no  no
    F7  yes no  no  no
    F8  yes yes no  no
    F9  yes yes yes no
</pre>
  The Swap button allows keys to be reordered, ideally /before/ recording a
  macro which uses another. Nested macros are not used very often, one case 
  might be that you already have a working macro, but also want to insert the
  current date and time above any line which is modified. You might therefore
  load the working macro into F6 (or swap it out of F9), and record in F7: 
  {Home, Return, Uparrow, "-- PL 12/11/05", F3, F6}.
<p>
  Note that infinite recursion is guarded against when the macro is run, 
  rather than tested for here, and no attempt is made to update calls to 
  a macro that moves keys; if you recorded an F6 it will playback an F6.
<p>
The Delete key is only enabled if an entry in the listview is selected, and
  none of the top four checkboxes are ticked. Deleted macros are lost 
  forever; if you have any important macros, it may be wise to copy the text
  from the edit screen (described below) into a text file.
<p>
The registers F6..F9 can be edited by clicking on the text area to the right 
of the checkboxes. This is allowed even if the macro is empty, to allow, for
example, a macro posted on a message board to be pasted into the editor.
The listview items can be edited by double clicking on them.
<p>
<img src="mmedit.jpg">
<p>
The edit window (which can be resized) contains two multi-line edit text 
areas. The top box contains the name/description of the macro. As a general 
idea, this should be set to something like "cict - copy if condition text 
to end if statement. Does not work for multi-line conditionals. Must be 
loaded to F7 and blah to F6". 
Any text can be used, up to the standard edit box limit of 32K characters.
<p>
If the top box is left as, or set to, "F6" thru "F9", then on exit that key 
("register") is updated, and any modifications are only kept in memory/
will be discarded at the end of the edit session. Any other value is 
added to/replaces (without warning) the corresponding entry in the list 
view and is saved to disk.
<p>
If the value in this top edit box begins with "F6", and is followed by some
additional text (even if it is only ' '), then it is a possible default for
the F6 key when Edita is next started. In practice, when more than one entry 
beginning with "F6" exists, the last (alphabetically) is used as the default. 
Similarly for names/descriptions beginning "F7" through "F9".
<p>
Note that if you edit the top box, eg to correct a spelling mistake, a new
database entry will be created and you should manually delete the old one.
<p>
You can switch between the two edit boxes using Ctrl Tab.
<p>
Editing macro entries is a bit of a hit-and-miss affair; very little 
assistance is given, and there is very little checking (as yet) that an 
edited macro will not cause a crash.<br>
"{MR_CHAR,{" (or "{1,{") indicates a graphic character,<br>
"{MR_VIRT,{" (or "{2,{") a virtual (function) key, and<br>
"{MR_FIND,{" (or "{3,{") a search target.<br>
Keys are held internally using a much more purely numeric format, using the 
standard windows keycodes, eg Uparrow is 38, F1 is 112. This is also true for
the macros table in edita.edb. Some keys always appear as numbers, eg Ctrl C 
is shown as 3.
<p>
MR_CHAR and MR_VIRT are followed by {keycode, control, shift}, MR_FIND (which
sets the default, a subsequent F3 is usually present to actually perform the
search) is followed by the search target and some settings from the Find window.
Multiple MR_CHAR entries are packed for ease of reading into a single string, 
but are stored as individual characters internally.
<p>
Usually the only things practical to edit are text strings, or, as mentioned, 
paste a complete macro. It is not the intention to make macros easy to edit,
it is usually far easier to re-record them from scratch. Some blatent errors
such as a missing closing bracket are caught, and an option is given to retry
(ie resume editing) or cancel (ie discard the edit field contents).
<p>
Note that nested macro calls are just saved as normal function keys. 
<p>
As promised, here is the text of the macro I use to maintain ealng_en.txt:
<pre>
{{MR_FIND,{{"xl(",0,0,1,0}}}, {MR_VIRT,{VK_LEFT,1,0}},   {MR_VIRT,{VK_F3,0,0}},
{MR_VIRT,{VK_ESCAPE,0,0}},    {MR_VIRT,{VK_HOME,0,1}},   {MR_VIRT,{VK_DELETE,0,0}},
{MR_VIRT,{VK_RIGHT,0,1}},     {MR_VIRT,{VK_F3,1,1}},     {MR_VIRT,{VK_ESCAPE,0,0}},
{MR_VIRT,{VK_END,0,1}},       {MR_VIRT,{VK_DELETE,0,0}}, {MR_VIRT,{VK_HOME,0,1}},
{MR_CHAR,{3,1,0}},    {MR_VIRT,{VK_END,0,0}},    {MR_CHAR," = "},
{MR_CHAR,{22,1,0}},   {MR_FIND,{{"xl(",0,0,1,0}}},{MR_VIRT,{VK_F3,0,0}}}
</pre>
Line 1 sets the search target, Ctrl Left, F3 (aka the 'handy little trick').<br>
Line 2 is Escape (cancel selection), Shift Home, Delete.<br>
Line 3 blocks a double quote, Ctrl Shift F3's the next, and cancels the selection.<br>
Line 4 is Shift End, Delete, Shift Home.<br>
Line 5 is Copy, End, and typing in " = ".<br>
Line 6 Pastes and finds the next "xl(".<br>
<p>
If you want to test it, just copy and paste it into Macro management, and copy and
paste the sample text given in the last section to try it out on.
<p>
Just in case, here is the complete text of the other macro I described above:
<pre>
{{MR_FIND,{{"then",0,0,1,0}}}, {MR_VIRT,{VK_LEFT,1,0}},  {MR_VIRT,{VK_F3,0,0}},
{MR_VIRT,{VK_LEFT,1,0}},       {MR_VIRT,{VK_LEFT,0,0}},  {MR_VIRT,{VK_HOME,0,1}},
{MR_VIRT,{VK_RIGHT,1,1}},      {MR_VIRT,{VK_RIGHT,1,1}}, {MR_CHAR,{3,1,0}},
{MR_VIRT,{219,1,0}},           {MR_CHAR," -- "},     {MR_CHAR,{22,1,0}},
{MR_VIRT,{221,1,0}},           {MR_VIRT,{VK_END,0,0}},   {MR_VIRT,{VK_F3,0,0}}}
</pre>
<p>
There are no plans to further enhance this feature, but you should feel free to
modify eamacro.ew and/or eamncode.e yourself, if you so wish.
<p>

<a name=Merr></a>
<h3>5.3 Macro Error Messages</h3>
<!---------------------------->
<h4>Invalid/error messages</h4> (eg '}' expected), along with a segment of 
the macro and a caret pointing roughly where the error is, offer Retry 
(resume editing) or Cancel (discard the edit field contents).

<h4>cannot playback F7 from F6</h4>
  If F6 invoked F7 and F7 invoked F6, then it would loop until it ran out of memory.
  The easiest way to prevent this has been taken: low-number function keys (eg F6)
  cannot invoke higher-number function keys (eg F7). In some cases the Swap function 
  of Macro management might help; however any key which invokes another will probably
  need re-recording after using this. In fact, you should only ever get this message
  after using the swap function, or perhaps after saving a macro and later reloading 
  it to a different key.

<h4>cannot record F7 inside F6</h4>
  As above, only this message occurs during recording. Theoretically I could save
  the keystroke, but it would not play back, and the Swap function is of no help
  since it does not change the actual keystrokes recorded in any way. If you meant to
  stop recording F6 and play it back immediately but hit F7 instead, then the macro
  recording of F6 will have stopped at the point you wanted.

<h4>cannot record F6 and F7 at the same time</h4>
  This should be self explanatory. If you are already recording F6 you cannot start
  recording F7 without stopping the recording of F6 first. As above, if you were 
  actually trying to stop recording F6, you have succeeded.

<h4>Note: Macro recording stopped.</h4>
  The action being attempted is not supported by macro playback and therefore is
  not recorded. Typically this includes anything which involves a dialogue pop-up, 
  eg file open. Macro recording is automatically switched off.
<p>
If at any point you are not sure whether macro recording is still active, press
Alt Home (move to line 1 of screen) - the Note: Macro recording stopped message 
will appear if recording was still in progress.
<p>
Alternatively Shift F6..9 will stop any recording and open the management screen.
<p>
&nbsp;
<p>

<a name=Options></a>
<h2>6. The Options Menu</h2>
<!------------------------->

<a name=Autocomplete></a>
<h3>6.1 Autocomplete</h3>
<!---------------------->

The .syn files contain an optional AutoComplete section with lines such as:
<pre>
    ^ i&f | then^pend if
</pre>
The ^ character is interpreted (like \ in strings and % in printf):
<ul>
<li>    "^ " denotes whitespace (any combination of spaces and tabs)
          This may only occur at the start of a line.
<li>    "^p" denotes a line break
<li>    "^t" denotes a tab character
<li>    "^," denotes a '(' or ',', for parameter definitions.
          If this is not used, cursor must be at the very end of the
          line for any autocomplete to trigger.
<li>    "^b" reserved for backspace (not implemented)
<li>    "^^" reserved for a single hat (not implemented)
</ul>
<p>
Each autocomplete is defined on one line only, and inline comments are not 
     allowed; instead they must be on a separate line.
<p>
A single & prefix indicates the "trigger" key. Text to the left must
    match the current line, text to the right is inserted.
<p>
    A | indicates the desired new cursor position.
<p>
 So, the example above means:<br>
    when 'f' is keyed, check that the cursor is at the end of a line which is
    some whitespace (or none) followed by 'i', and if so, insert "  then" and
    "end if", and move the cursor one space right from where the f was.
<p>
The Options/Auto Complete menu entry, and the 18th entry on the toolbar [a=>]
allow this handling to be enabled or disabled.


<a name=Background></a>
<h3>6.2 Background Processing</h3>
<!------------------------------->
This option allows background processing to be turned on and off. It is sometimes
helpful (eg when running timing tests) to disable Background processing, but it is
not without some drawbacks. It is only ever worthwhile if the red triangle around 
the little workman on the toolbar is staying red rather than turning grey in the 
blink of an eye when Edita starts, a file is saved, etc.
<p>
Background processing scans through edita.edb and checks the size/date/time of all
entries (which can itself take a moment). If any file has been updated since the
last background scan (if any), it loads the file and scans it for include statements
and exported globals, which are saved in edita.edb for displaying the project tree
and F1 lookup. Naturally if you disable background processing, this information
will slowly become more and more out of date, however it is quite likely to remain
quite useful/useable for some time as these things tend not to change much.
<p>
However, the routine drop-down on the toolbar, and Home/End keys jumping to the
start/end of the current routine, may not work properly until background processing
has finished or obviously therefore while it is disabled.

<a name=Colours></a>
<h3>6.3 Colours</h3>
<!----------------->
<img src="eclrs.jpg"><p>
This option allows you to edit the colours for the selected syntax.
All files ending with ".syn" in the syn subdirectory and loaded at startup,
and each .syn file must specify at least one file extension. The syntax 
colouring is automatically selected by the file extension of the file currently
being edited.
<p>
A column of radio buttons is displayed, with small colour swatches to the left 
displaying the current settings. The descriptions of some of the radio buttons
are taken from the appropriate syn file. Below these are check boxes for bold
and italic, and to the right is an edit box and a column of standard colours. 
At the bottom of the screen are three buttons labelled Custom, OK, and Cancel.
<p>
One of the radio buttons on the left must be selected before the bold, italic,
edit box, standard colours, or Custom button are enabled. The radio buttons 
may be selected by clicking on either the sample patch or the radio button 
immediately to its right. Once this is done, the user may:
<ul>
<li>Enable or disable bold or italic for the selected syntax element,
<li>Type the name of a standard colour in the edit box,
<li>Enter a non-standard colour in the form #hhhhhh, 
<li>Click on one of the standard colours on the right (not the text),
<li>Press the Custom button to select a non-standard colour via the 
    standard windows colour selection dialog.
</ul>
Notes:
<ul>
<li>Bold and italic settings are always disabled when a stock font is in use 
    (see Select Font). Some fonts display bold in a different width to normal 
    text, in which case the bold option is disabled. The last character of 
    italic text may be clipped. If this occurs, select a different font.

<li>Bold and italic are also always disabled when BackGround or Highlight is
    selected, and also (at the moment) for URLs.

<li>Text entered into the edit box is ignored until either it matches one 
    of the standard colours exactly (case insensitive), or is exactly six 
    hexadecimal digits long, optionally prefixed with "#".

<li>The standard colour selection dialog button "Add to Custom Colours" is 
    of almost no use in this context. Use the dialog's OK button instead.
</ul>
The colour selected is displayed in the corresponding colour patch and the
editor text (if any) in the background is immediately updated.
<p>
It is possible to have both the font and colour dialogs open simultaneously,
which you might want to do because the bold and italic availability (as shown
on the color screen) is dependent on the font selected.
<p>
The number of nested bracket colours required is specified in the appropriate 
syn, between 1 and 7 (or omit the Braces line for no bracket colouring).
<p>
The remaining radio buttons correspond to sections in the syn file. There is
no theoretical limit to the number of sections that can be defined, however 
it can be difficult to select distinct colours if there are too many sections,
and the colour dialogue is probably limited to around 18 colours, as any more 
and the window may not fit on the screen (depending on your screen settings).
<p>
Pressing the OK button closes the window and saves the settings to file.
Pressing the Cancel button restores the settings to the state they were
in when the dialog was opened, and closes the window.
<p>
Press OK to accept the colour changes (and rewrite the clr file) or cancel
to close the dialog and return to the colour settings on entry.
<p>
It is wise to close and reopen the editor to ensure all changes have been
properly saved before continuing. In some cases this may also free a small
number of system resources.


<a name=Fonts></a>
<h3>6.4 Fonts</h3>
<!--------------->
<img src="efonts.jpg"><p>
The first four entries <small>(SYSTEM_FIXED_FONT, ANSI_FIXED_FONT, OEM_FIXED_FONT,
and DEVICE_DEFAULT_FONT)</small> are "stock" fonts. You may not change the size of
these fonts, however their equivalent will usually exist lower in the list, 
where it may be possible to change the size. For example, on my machine the 
following are equivalent:
<pre>
  SYSTEM_FIXED_FONT   FixedSys 11 pt,
  ANSI_FIXED_FONT     Courier 10 pt,
  OEM_FIXED_POINT     Lucida Console 8 pt Bold[*],
  DEVICE_DEFAULT_FONT Courier New 12 pt.
</pre>
The main reason these fonts are listed at all is their guaranteed availability 
which makes them suitable for defaults when the editor is installed: a Russian 
version, say, of welcome.txt is unlikely to be readable in Courier New no 
matter what language you speak, but is far more likely to be readable if 
shown in whatever SYSTEM_FIXED_FONT is aliased to on a Russian machine.
<p>
There is little gain in using these builtin fonts over selecting any of the 
other fonts (it might save an insignificant few K of memory, or less). One 
downside to using stock fonts is that urls are not underlined.
<p>
Clicking on or cursoring to a face will update the text appearance in the
main editor. Apart from the four entries listed above, the Size listbox
will change to show the available sizes, with the closest available match
to the last selected fontsize selected. Again, clicking on or cursoring to
a different size updates the text in the main editor window.
<p>
True type fonts are shown with a default set of 16 popular sizes, however
as these are scalable, many other sizes can be specified.
<p>
The size edit box is enabled for true type fonts only. If a new size is 
entered, it is automatically inserted in the list of available fonts, and 
applied immediately to the main editor display. The size is not recognised 
if it is not one of "1".."9", "10".."99", "1.1".."9.9", or "10.1".."99.9". 
Neither a trailing ".0" nor a leading "0" are accepted. As soon as a valid 
point size is entered, an appropriate entry is added to the list of font 
sizes and the editor text updated. When entering eg "35", a font of size 3 
may be created and then a font of size 35. The unneeded font size 3 will 
not be recreated when the editor is exited and reloaded.
<p>
Alt-F sets the focus to the Face ListBox, and Alt_S sets the focus to the 
Size ListBox (rather than the EditBox above), which allows cursor up and 
down to be used to change the selection. In the case of Alt-S, this gives
more consistent behaviour between True-Type and non-True-Type fonts for
which the editbox is disabled.
<p>
Fractional point sizes are rounded to the nearest available size (as in fact
are integral ones, since the concept of point size predates computers by 
several hundred years, and 1/72th of an inch is not exactly metric). Many 
sizes will appear identical, for example on this machine Courier New 9.1 to
9.6 are equivalent, as are 9.7 to 10.2. In general, it is only worth trying
fractional sizes ending with ".5".
<p>
It is possible to have both the font and colour dialogs open simultaneously.
<p>
Press OK to close the font box and keep the selected font or cancel to
return to the font which was in force when the font dialog was opened.
<p>
It is wise to close and reopen the editor to ensure all changes have been
properly saved before continuing. In some cases this may also free a small
number of system resources.
<p>
[*] This dialog does not permit selection of bold. Text attributes (ie bold
and italics) may instead be associated with individual syntax elements via
the Colour option.
<p>

<a name=dopts></a>
<h3>6.5 Display Options</h3>
<!------------------------->
<img src="dopts.jpg"><p>
The following options should be self explanatory, and apply immediately so if in 
doubt just try checking and unchecking them:
<ul>
<li>Show full path in title bar
<li>Tool Bar
<li>Tab Bar
<li>Tabs at bottom of screen
<li>Horizontal Scroll Bar
<li>Vertical Scroll Bar
<li>Status Bar
</ul>
The other options are:
<ul>
<li>Multiline Tabs (disabled if Tab Bar is not checked). Governs the behaviour 
     when more files are open than tabs will fit across the screen. If this is
     checked, the tabs spill onto multiple lines, otherwise "< >" is shown.
     If less than a screenwith-full of open filetabs exist, this has no effect.

<li>Ragged Right Tabs (disabled if Multiline Tabs is not checked). Determines
     whether the filetabs should be fitted to the window width or not.

<li>Single Dir Tab Bar (disabled if Tab Bar is not checked). When this option
     is checked, only files in the same directory as the current file are shown
     on the tab bar. If you open a file in a different directory (whether or not
     it is already open, you must do so via the standard windows dialogue), then
     only that file and any others in the same directory are shown on the tabbar.
     Naturally, if this is unchecked, all open files are listed.

<li>Permanent Scroll Bars (disabled unless either Horizontal or Vertical Scroll
     Bar is checked). If this option is not checked, the scrollbars only appear 
     when needed (ie if the source is longer than one screenful or its widest 
     line does not fit across the screen), otherwise the scroll bar is still 
     shown even when not needed (the thumb fills the entire control). This can
     reduce flicker when switching between files of different lengths/widths,
     or when typing causes the horizontal scroll bar to repeatedly appear and
     disappear (ie when inserting several lines of text at the start of a
     longish line). However it will, of course, reduce the visible text area.

<li>Permanent Fold Margin (disabled if line numbers is checked) controls whether
     a fold/bookmark margin is shown when none exist. The main advantage of 
     leaving it permanently visible is that mouse clicks on it can fold and 
     unfold control blocks.

<li>Space after margin determines whether to put a space after line numbers and
    fold/bookmark indicators. Has no effect if no margin is visible.

</ul>

<a name=eopts></a>
<h3>6.6 Edit Options</h3>
<!---------------------->
<img src="eopts.jpg"><p>
DEV: merge from ltchelp.txt
<ul>
<li>Replace tabs with spaces (recommended). If this is checked files are saved
     with tabs replaced by the number of spaces shown in the Tab width box.
     Although files are slightly larger, and take slightly longer to load, they
     are more likely to appear as the author intended when moving between 
     editors with different tab settings.

<li>Single Instance (recommended). Almost all testing has been done with this 
     flag set. If it is not checked, there may be problems updating edita.edb
     and verifying edita.edb, updating edita.ini, creating backups, printing, 
     window painter, using eama.ew, and background processing in general. 
     This option may be removed at some point, if there is no demand for it 
     and no simple solution can be found for the problems it can cause.
     Note that the debug option, which is really for development use (and can
     only be set by editing edita.ini) does manage to run multiple instances
     of edita, though at the cost of disabling problematic features in the
     second and subsequent copies.

<li>Restore files on open. If this option is set, Edita recalls the last editing
     session, including placing the cursor on the same line, remembering blocked
     text, bookmarks, and folds.

<li>Autosave files on exit. Suppresses warnings that files have not been saved
     (except those in an [untitled] tab) and saves them anyway.

<li>Autosave files on tab switch. When this option is set only the current file
     can have unsaved amendments. However if you are making sweeping changes to
     a large file and constantly referencing to, or amending a second file in 
     tandem, it can speed things up a bit to turn this off momentarily. On the
     other hand, when editing a large multi-file project, it can be a real pain
     to finish some edits, switch to "main.exw", and run it before realising
     that you have forgotten to save edits to the other files, so in general I
     recommend this option is checked.
 
<li>Create backups automatically. If this option is checked, Edita makes a copy
     of each file in edita\backups before updating it. In case of accident, 
     these files can be listed/opened using the File Panel's Recovery tab. 
     For more details <a href=#aback>See below</a>.

<li>Load ex.err on error. If this option is checked, and a program launched from
     Edita terminates in error, the ex.err file is automatically opened. It is a
     simple matter to press F12 to open the file by hand when needed, if this 
     option is turned off.

<a name=eorfexr></a>
<li>Reformat ex.err (recommended). If this option is checked, Edita shows eg
<pre>    
  crashpath = "D:\edita\"
</pre>
     rather than the much more cryptic
<pre>
  crashpath = {68'D',58':',92'\',101'e',100'd',105'i',116't',97'a',92'\'}
</pre>
     The ex.err file itself is not modified, so if you need to see the other 
     view, simply toggle this setting and reload ex.err (by right clicking on 
     the file tab). Note that ex.err is created by the Phix/Euphoria interpreter.
 
<li>Move cursor on scroll. If this option is checked and the vertical scrollbar 
     is used, the cursor remains anchored on the screen instead of the text. 
     It may be easier to experiment with this behaviour to determine which you 
     prefer than it is to explain.

<li>Home to first non-blank. If this is checked, the Home key will move to the 
     first non-blank space on a line and toggle with column 1. If not set, Home 
     always moves the cursor to column 1.
</ul>
The block of edit fields at the top right all share the feature that if an 
illegal value is entered, the corresponding text is turned bright red. The text 
entered is ignored until the text returns to black, indicating the value is 
valid and has been applied.
<ul>
<li>Tab width. Set the tab indentation between 1 and 8.

<li>Caret blink time. Enter a caret blink time, suggestions include 250 and 400.

<li>Mousewheel scroll. Set the number of lines to scroll per mouse wheel event. 
     This would typically be a value in the range 1 to 5.

<li>Retain undo for. Specify the time, in seconds, that undo actions should be 
     kept for, or zero to keep all undo actions until the end of the edit 
     session. The default is 3600 (1 hour). Note that undo actions are not 
     preserved between editing sessions, or if a file is closed and reopened.

<li>Autosave every. Specify the period, in seconds, between automatically saving 
     the current file, or zero to disable this feature. Note that if Autosave 
     files on tab switch is disabled, so files other than the current file can 
     have unsaved modifications, they are not saved by this feature.

<li>Retain backups for. Disabled if automatic backups are not in use. Specify 
     the period, in days, that automatically created backups should be kept for.
     See below for more details.

<li>Clear overstrike on: While overstrike mode is certainly useful, it can be a 
     pain if it gets left on accidentally. The following seven check boxes allow 
     you to specify what editing actions, if any, should turn it off:
    cursor up, cursor down, page (up or down), file (tab) switch, 
    paste, duplicate line, or home key. The defaults are page and file.
</ul>

<a name=aback></a>
<h4>Automatic backups</h4>
<!----------------------->
Backups are made in the edita/backups directory using an 8-character filename
which is made from the last digit of the year, months 1..9 and ABC, a two
digit day, and a two digit 'hour' and two digit 'minute'. If saves are made
more than once per minute, the minutes are incremented artificially, eg if
between 14:58:00 and 14:59:59(.99) five files are saved, they are recorded
as 14:58, 14:59, 14:60, 14:61, and 14:62. Of course 14:62 is not a real time, 
but it does give the general idea of when a backup was probably made.
<p>
The numbering scheme allows up to 10,000 backups per day, per file extension,
(reducing to 7640 per day if started just before midnight), and guarantees 
that backup names will not be duplicated over any 10-year period.
<p>
Automatic backups can be disabled by changing "Create backups automatically" 
in Edit Options. The number of days to retain backups can also be set there.
<p>
Unchecked, the backup directory will usually fill at a rate of say 25MB 
per week. (Though with this rather large html file, at some 230K, and being 
saved up to 20 times an hour, I am generating something nearer 130MB/week.
<small>[ OK, doing the maths suggests an average of 15 saves/hr, if I work a 
40hr week :-P ]</small>)
<p>
Specifying a non-zero value for the number of days to retain backups causes 
the backups to be scanned once at the start of each editing session. Only the
actual dates, not the times, are examined, so for example when set for
2 days and it is 11:35pm on the 21st, a file dated at 12:05am on the 
19th will be left alone, despite it being about 2.98 days old.
<p>
The editor remains fully responsive while this scan occurs.
<p>
The number of days to retain backups is currently limited to 90 days. At 
this setting, the backup directory is likely to contain between 300MB and
1.6GB of data, and contain maybe as many as 8000 files, which will obviously
impact on performance. Also, the 'year wrap' logic (see checkBackups() in
eaedb.e) is nice and simple, but would fail to delete say December 2005
files sometime in January 2007, if the retention period was over 365 days.
You can of course set the value to zero and manage this directory manually.
<p>
Also note that the file dates in the backups directory correspond to the 
date and time of the file about to be overwritten, not the date and time
that the backup was physically created, for which the file name is a better
indicator. Put another way, the automatic purge works from the file name,
not the file date.
<p>


<a name=Fpanel></a>
<h3>6.7 File Panel</h3>
<!----------------------->
<img src="edita.jpg"><p>
The [optional] File Panel on the left is currently showing the project tree, ie
all files included in the current project.<br>
The right hand border can be dragged to resize the file panel.
<p>
At the bottom of the screen is the [optional] message area, here showing the
output of a console application.<br>
The left border, top edge, or top left corner can be dragged to resize the 
message area.
<p>
The main window above shows a bookmark and a folded routine.


<a name=Marea></a>
<h3>6.8 Message Area</h3>
<!---------------------->
The message area (example shown above) holds output from console applications; 
either programs which have an exwc extension, those run with the 
<a href=#PRun>Capture Console output</a> flag set, or GUI programs that use
the eama.ew component provided with Edita.
<p>
The source eama.ew includes routines for an application to send text directly
to the message area directly, and is recommended for all GUI applications since 
it does not require that a console window appears.

<a name=Wrap></a>
<h3>6.9 Wordwrap</h3>
<!------------------------->
DEV: see wordwrap.txt

<a name=Rexerr></a>
<h3>6.10 Reformat ex.err</h3>
<!------------------------->
This is exactly the same option described <a href=#eorfexr>above</a>.

<p>
&nbsp;
<p>

<a name=Help></a>
<h2>7. The Help Menu</h2>
<!---------------------->

<a name=F1></a>
<h3>7.1 Context Help</h3>
<!---------------------->
<img src="ehelp.jpg"><p>
The above might appear if F1 is pressed when on the word "removeFocus".<p>
<img src="ehelp2.jpg"><p>
Alternatively, external chm and hlp files might be loaded, eg on "length",<p>
<img src="ehelp3.jpg"><p>
or when "WM_ACTIVATE" is under the cursor.<p>

<!-- DEV Phix -->
In this case you can look at the official RDS Euphoria manual (providing it is
installed in %EUDIR%/doc) by pressing Reference Manual, or press Keyboard Help
for a quick reference listing all the shortcut keys supported, of which there
are about 115. The Keyboard Help window also appears if the editor does not 
recognise the word under the cursor.
<p>
The above text (for the builtins, which otherwise do not have an "official" 
routine definition available) is stored in lang/ealng_en.exh. This, along with 
other standard includes and all [Phix/Euphoria] files in the current project are 
regularly (automatically) scanned, and help entries added for any global 
routine definitions found. If the word under the cursor is found other than in 
ealng_en.exh, and it is not a global definition in a standard include file,
such as sort on line 6 of sort.e, the Reference Manual button is replaced with 
an Examine Code button which opens the source at the routine definition.
<p>
If you define a new global routine, Edita automatically creates a new help text
entry for it shortly after the file is saved. The help window also shows details of
routines defined locally in the file currently being edited.
<p>
If Edita does not recognise the surrounding function (which it always looks for
first), it scans the current file looking for definitions/use of the word under
the cursor. Note that this does not (yet) lookup global variables and constants.
To recap, if you are on the word "True" on a line such as "if flag = True then",
you will probably see something like "constant True = (1=1)" along with several
other uses of it. However if the current line is "setVisible(XX,True)", then
the help text for setVisible will always be shown. If in this case you really do
want to lookup True, the easiest way is to block select it and press Ctrl F3, or
perhaps to copy and paste it onto a new blank line before pressing F1.
<p>
If nothing else can be found (eg the cursor is on a blank line), then the 
keyboard help is shown.
<p>
<a name=CtrlF1></a>
<h3>7.2 Keyboard Help</h3>
<!----------------------->
Opens a pop-up summary of allowable/recognised keystrokes, as defined in the
file ealng_XX.txt, under "_F1HELP".

<a name=Ehome></a>
<h3>7.3 Edita Home Page</h3>
<!------------------------->
Opens http://palacebuilders.pwp.blueyonder.co.uk/edita.htm in the browser.

<a name=Eref></a>
<h3>7.4 Euphoria Reference Manual</h3>
<!----------------------------------->
<!-- DEV Phix -->
Opens %EUDIR%/HTML/Refman.htm in the browser, if it is present. Note that 
specific entries in that manual can be opened directly by pressing F1 when
the cursor is over the builtin (eg "length()").

<a name=Manual></a>
<h3>7.5 Manual</h3>
<!---------------->
Opens this document, if it has been installed into the doc subdirectory of
the edita directory, otherwise it goes online to find it.
<p>
&nbsp;
<p>

<a name=toolbar></a>
<h2>8. The Toolbar</h2>
<!------------------->
The toolbar is organised into seven groups:
<table WIDTH=98%>
<tr><td WIDTH=14%><a href=#Fnew><small>New</small></a>
    <td WIDTH=14%><a href=#Print><small>Print</small></a>
    <td WIDTH=14%><a href=#Fclip><small>Cut</small></a>
    <td WIDTH=14%><a href=#Eundo><small>Undo</small></a>
    <td WIDTH=14%><a href=#Run><small>Run</small></a>
    <td WIDTH=14%><a href=#Fonts><small>Fonts</small></a>
    <td WIDTH=14%><a href=#Background><small>Background</small></a>
<tr><td WIDTH=14%><a href=#Fopen><small>Open</small></a>
    <td WIDTH=14%><a href=#Print><small>Print preview</small></a>
    <td WIDTH=14%><a href=#Fclip><small>Copy</small></a>
    <td WIDTH=14%><a href=#Eundo><small>Redo</small></a>
    <td WIDTH=14%><a href=#csh><small>Show Formatting</small></a>
    <td WIDTH=14%><a href=#Colours><small>Colours</small></a>
    <td WIDTH=14%><a href=#F1><small>Help</small></a>
<tr><td WIDTH=14%><a href=#Fsave><small>Save</small></a>
    <td WIDTH=14%><a href=#Fclip><small>Paste</small></a>
    <td>
    <td WIDTH=14%><a href=#Ffind><small>Find</small></a>
    <td WIDTH=14%><a href=#Autocomplete><small>Autocomplete</small></a>
    <td>
    <td>
<tr><td WIDTH=14%><a href=#Fsaveall><small>Save All</small></a>
    <td>
    <td>
    <td WIDTH=14%><a href=#Ffnxt><small>Find Next</small></a>
    <td WIDTH=14%><a href=#Wrap><small>Wordwrap</small></a>
    <td>
    <td>
<tr><td WIDTH=14%><a href=#Fclose><small>Close</small></a>
    <td>
    <td>
    <td WIDTH=14%><a href=#Ffprv><small>Find Prior</small></a>
    <td>
    <td>
    <td>
</table>
<small>
with a <a href=#Qjump>Quick Jump</a> drop-down on the right. All the toolbar options have equivalent options on the menus.
</small>
<p>
Toolbar entries can be removed, if desired, by amending lang/ealng_XX.txt.
<p>
&nbsp;
<p>

<a name=synfiles></a>
<h3>9. Syntax files</h3>
<!--------------------->
DEV:

<a name=langfiles></a>
<h3>10. Language files</h3>
<!--------------------->
DEV:

<!--
<a name=rareities></a>
<h3>10. Rare Events</h3>
<!--------------------- >

<h4>WHOOPS! Undo/Redo has done wrong!</h4>
<!--------------------------------------- >
<img src="whoops.jpg"><p>
There is no known way to cause this message to appear.
<p>
As characters are entered, or text deleted, an internal list of "actions" 
is created. These are used to perform undo/redo.
<p>
If you delete text and undo, the text is restored, equally, if you insert
text, undo, then redo, the entered text is restored. To facilitate this,
both insert and delete actions must contain the text entered/deleted, and
equally there are flavours of both undo and redo that delete text.
<p>
It is sensible (and relatively easy) to verify that the program really has 
deleted what it thinks it should have deleted, ensuring that the action list
is in complete agreement with the file text, otherwise we risk severe mayhem 
and confusion as further entries are undone/redone in the wrong place.
If, for example, you type "fred" and then Ctrl Z (undo), what the editor 
actually does (to perform the undo) is block select four characters and
deletes them. It then compares the text actually deleted to make sure it 
blocked in the right place. What it does not (and should not) do is find
a [random] instance of "fred" and delete that.
<p>
However, the question is, what should be done when an error is detected? 
About the worst possible choice is to crash the editor and throw away the 
entire edit, when in all probability it has only messed up one or two
characters. Instead, the strange-looking warning window shown above is 
displayed.
<p>
<small>Aside:
If you can reproduce this, it the following will help to track it down.
Only one file should be open, and it should not be longer than 100 lines.
The error should have occured shortly after loading. Press Tools/Crash
to create an ex.err file, and check that neither 'filetext' or 'actions' in
that file terminate with "...", if they do it is likely that the ex.err
file will not be of much use.
</small>
<p>
Note that once this message has appeared, the text and the action list 
will be out of sync, so it will occur with increasing frequency unless 
the editor is re-started.
<p>
While this is already rather unlikely, as the editor matures, any conditions 
causing this message will over time be noticed and reproduced, at least one 
cause fixed, and be even less likely to reoccurr as a consequence. However 
the message itself will never be removed (hence I should document it).
-->


</body>
</html>

<!--
<!--
->
=======================================
<li>Fast load and response times (<a href=edita2.htm>details</a>).
<li>Multiple documents.
<li>Tab bar re-ordering (Ctrl Page Up/Down).
<li>Tab text coloured red when file needs saving.
<li>Tab context menu / open in selected directory.
<li>Automatic backups and Recovery tree listing last backup first.
    (backup is opened as a normal file, unusually named, that can be compared
     against the current (or any other backup), and/or cut and pasted to restore)
<li>Drag and Drop support
<li>Single instance and command line support.
<li>URL highlighting with doubleclick launch.
<li>Normal and column-based text selection (using Alt key).
<li>Some 115 keyboard shortcuts (as listed by F1/Keyboard Help).
<li>Intelligent column paste.
    (if a single word or line is copied, it can be pasted into a column 
     selection spanning several lines)
<li>Re-open previous documents, each at same line/column.
<li>Unlimited undo (optionally time-limited)
<li>Block (un)comment / (un)indent.
<li>Multi-line find/replace (using ^p to signify line breaks)
<li>Find and Replace history drop-downs.
<li>Run program.
<li>Capture console output.
<li>Multiple programming language Syntax highlighting (possibly biased for Phix/Euphoria)<br>
    (syntax is automatically selected based on file extension)
<li>Multilingual support using regional settings (translation files and date/time display)
    (English, German, and French are currently supported)
<li>Insert / Overstrike mode toggle.
<li>Option to toggle the display of spaces / tabs / line breaks.
<li>Optional resizeable treeview and message panes.
<li>Optional toolbar, tab bar, horizontal and vertical scrollbars, and status line. 
<li>Colour and font settings.
<li>Print, Print Preview and Report Painter (optional component)
<li>Window Painter (optional component) (<a href=WPmanual.htm>details</a>)
<li>Goto line command
<li>autoindent
<li>basic wordwrap
<li>F12 ex.err file handling
<li>shellExecute for .html and .bat files
<li>Automated error processing.
<li>ToolBar.
<li>Greyed out menu entries.
<li>Bind and Shroud processing.
<li>File and Directory compare.
<li>Find in files.
<li>Macro (record/playback).
<li>Routine and Section list.
<li>Common code analysis.
<li>Options windows (rather than editing the ini file by hand).
<li>routine and block folding.

</ul>

Latest Release:<br>
<ul>
<li>Bugfix release (*7), strings ending in ",10}" in ex.err not properly 
converted, replaced system_exec with system to fix bind problem, comma in
eacons.exw, code folding now does a single if branch and the fold margin
can be clicked with the mouse to fold/unfold code blocks.
</ul>
</small>
<small>
<p>
Non-english users may like to check the <a href=#misc>Updated Language Files</a>
section below before downloading.
<p>
</small>
<table border cellpadding=10 cellspacing=0>

<tr><td align="center"><a href=EDALL.ZIP>0.2.5</a>
    <td align="center"><small>full</small>
    <td align="center"><small>06/11/2005</small>
    <td align="	center"><small>889K</small>
    <td><SMALL>
    Executables, and all optional components (no source).<br>
    Unzip to a folder of your choice (using folder names) and run edita.exe.<br>
    <a href=EDALL.exe>Windows Installer</a> (915K)
    </SMALL>
<tr><td align="center"><a href=EDPLUS.ZIP>0.2.5</a>
    <td align="center"><small>plus</small>
    <td align="center"><small>06/11/2005</small>
    <td align="	center"><small>1330K</small>
    <td><SMALL>
    As above, plus source, Phix/Euphoria run-time and a copy of arwen.
    <a href=edita2.htm#plus>notes</a>
    <a href=EDPLUS.exe>Windows Installer</a> (1356K)
    </SMALL>
<tr><td align="center"><a href=Z025.ZIP>0.2.5</a>
    <td align="center"><small>source</small>
    <td align="center"><small>06/11/2005</small>
    <td align="center"><small>412K</small>
    <td><SMALL>
    Source, without any of the optional components. Includes arwen,<br>
    requires Phix interpreter from 
    <a href="http://www.phix.isgreat.org">www.phix.isgreat.org</a> 
    or Euphoria interpreter from
    <a href=http://www.rapideuphoria.com>www.rapideuphoria.com</a>.<br>
    Unzip to a folder of your choice (using folder names) and run "exw edita.exw".
    </SMALL>
</table>

<a name=options></a>
<h3>Optional Components</h3>
<small>
The source code is not available for Optional Components.
<p>
</small>
<table border cellpadding=10 cellspacing=0>
<tr><td align="center"><a href=EDPP.ZIP>Print, Print Preview, and Report Painter</a>
    <td align="center"><small>15/09/2005</small>
    <td><SMALL>
    221K. Print and Print Preview use a "stamped" (freeware) layout. 
    The "Report Painter" option triggers a warning message; I hope to
    add an "Experiment" option to this. (No source)
    </SMALL>
<tr><td align="center"><a href=EDWP.ZIP>Window Painter</a>
    <td align="center"><small>15/09/2005</small>
    <td><SMALL>
    132K. Allows simple dialogue windows to be designed visually (<a href=WPmanual.htm>details</a>)
    (No source)
    </SMALL>
<tr><td align="center"><a href=zrt.ZIP>2.4 runtime</a><td align="center"><small>01/03/2005</small>
    <td><SMALL>
    325K Minimal RDS public domain files (for experienced users only)
    </SMALL>
<tr><td align="center"><a href=zrt25.ZIP>2.5 runtime</a><td align="center"><small>01/03/2005</small>
    <td><SMALL>
    443K A 2.5 version of the above (for experienced users only)<br>
    These files are included in the plus version above.
    </SMALL>
</table>

<a name=misc></a>
<h3>Misc</h3>
<table border cellpadding=10 cellspacing=0>
<tr><td align="center"><a href=lang.ZIP>Updated Language files.</a>
    <td align="center"><small>08/09/2005</small>
    <td><SMALL>
    By the time you read this, these files are already included in the above zips.<br>
    The purpose of this section is to help you determine whether an updated file is 
    likely to be available in a few days or not. It simply lists the information I
    have about who is regularly sending me updated translation files, and when.
    I know not when contributors are going on holiday, working overtime, having a 
    heart bypass operation, etc, this only details what I do actually know.
    <p></SMALL><SMALL>
    Not all releases warrant a new language file. The editor will probably run fine
    with an out-of-date language file, and complain at most once per session with
    "Warning - no translation for XXXX in ealng_XX.txt".
    <p></SMALL>
    <ul>
    <li><SMALL>Determine the language code from the table below, or by running the Tools/
    Translation Assistant option from within Edita, which shows the value of "XX"
    (deduced from Control Panel, Regional Settings) that Edita will use on your PC.</SMALL>
    <li><SMALL>View the existing lang/ealng_XX.txt file to see if the version number
    is already up-to-date. This can be done by selecting OK from the Translation
    Assistant, at which point you can also press F4 repeatedly to determine the number of 
    differences. If there are too many, press Ctrl Z twice to restore the original
    file contents before closing it (Note it may have been automatically saved).</SMALL>
    <li><SMALL>Using your skill and judgement, decide whether a relevant update is imminent,
    and possibly decide to return in a few days.</SMALL>
    </ul>
    <table border cellpadding=10 cellspacing=0>
    <tr align=center><th width="12%">Version<th width="12%">0.1.8
            <th width="12%">0.1.9
            <th width="12%">0.2.0
            <th width="12%">0.2.1
            <th width="12%">0.2.2
            <th width="12%">0.2.3
            <th width="12%">0.2.4
    <tr align=center><td>Language<td>16/7<td>1/8<td>16/8<td>21/8<td>8/9<td>15/9<td>29/9
    <tr align=center><td>nl<td>17/7<td>2/8<td>n/a<td>23/8<td>n/a<td>n/a<td>n/a
    <tr align=center><td>de<td>n/a<td>n/a<td>18/8<td>21/8<td>n/a<td>n/a<td>n/a
    </table>
    <SMALL>
    ealng_nl.txt (Dutch) translations provided by Tommy Carlier.<br>
    ealng_de.txt (German) translations provided by Juergen Luethje.<br>
    </SMALL><p><SMALL>
    Please unzip to the same directory as edita.exw[/e] with folder names, or edita/lang
    without folder names, either way ensuring that you do in fact /overwrite/ the previous 
    version(s) in the lang subdirectory.<br>
    <p></SMALL><SMALL>
    If all the entries above end n/a (from row 3 on), then lang.ZIP is currently empty.<br>
    <a href="lang.ZIP">Download zip of language files</a>
    </SMALL>


</table>

<a name=prev></a>
<h3>Previous Releases</h3>
<table border cellpadding=10 cellspacing=0>
<tr><th width="12%">Version<th width="12%">Released
    <th>Description

<tr><td align="center"><a href=Z024.ZIP>0.2.4</a><td align="center"><small>29/09/2005</small>
    <td><SMALL>
Bugfix release
    </SMALL>

<tr><td align="center"><a href=Z022.ZIP>0.2.2</a><td align="center"><small>08/09/2005</small>
    <td><SMALL>
Bookmarks, and Routine and Block Folding.<br>
Block comment handling, Html.syn, and bat.syn.
    </SMALL>

<tr><td align="center"><a href=Z021.ZIP>0.2.1</a><td align="center"><small>21/08/2005</small>
    <td><SMALL>
6 bugfixes, Capture console output flag on Ctrl F5 pop-up.
    </SMALL>

<tr><td align="center"><a href=Z020.ZIP>0.2.0</a><td align="center"><small>16/08/2005</small>
    <td><SMALL>
Added Alt key (up,down,left,right,enter) handling on the project and directory trees.<br>
Control structure and bracket matching via Ctrl [.<br>
ComboDropDownList of routines added to toolbar.<br>
Keyword and builtin translation handling (eg: se lunghezza(x)=1 allora fine se).<br>
 -- source file/clipboard always in English (ie: if length(x)=1 then end if).<br>
The "Replace Tabs with spaces" .ini option now works.<br>
Single Dir Tabbar .ini option added for Don Cole.<br>
".." entry added to project tree for files included more than once.<br>
F1 help checks the project tree, so eg it can show help for arwen/create()<br>
in one file but win32lib/create() in another, based on include statements.<br>
(should also cope with multiple lib versions)<br>
Added FullScreen mode (F11).<br>
    </SMALL>

<tr><td align="center"><a href=Z019.ZIP>0.1.9</a><td align="center"><small>01/08/2005</small>
    <td><SMALL>
Rewrote string colouring code.<br>
Made Auto Complete multi-syntax (and user definable).<br>
Added background task indicator to the toolbar.<br>
Added automatic project tree loading.<br>
Fixed nasty buffer overrun bug in clipboard handling (copy > 100K).<br>
First draft of keyword/builtin translation ("test2.exw" only this release).<br>
First draft of tabs <=> spaces on file load/save (ditto).<br>
    </SMALL>

<tr><td align="center"><a href=Z018.ZIP>0.1.8</a><td align="center"><small>16/07/2005</small>
    <td><SMALL>
Context sensitive help.<br>
Auto Completion. <br>
Bracket carry-forward handling.<br>
Mismatching brackets are now coloured illegal.<br>
Tailorable database browser (see Misc).<br>
Moved translation files to new lang subfolder.<br>

    </SMALL>


<tr><td align="center"><a href=Z017.ZIP>0.1.7</a><td align="center"><small>05/07/2005</small>
    <td><SMALL>
Print preview and window painter should now work on XP.<br>
Directory view added to the File Panel.<br>
Ex.err files automatically parsed to make strings readable. [optional]<br>
Quick jump now works as it did in Meditor.<br>
Dozens of minor bug fixes, see readme.txt.<br>
    </SMALL>


<tr><td align="center"><a href=Z016.ZIP>0.1.6</a><td align="center"><small>25/05/2005</small>
    <td><SMALL>
Fixed around two dozen misc crashes when no open files (eg trying to save when
there is no open file gave a subscript 0 error).<br>
Made single instance restore a minimised window.<br>
Find and find in files now open with the search text selected.<br>
Found and fixed a problem whereby resizing the file panel left the edit area blank.<br>
Alt '<' was not unindenting properly (and crashing on .txt files).<br>
Ctrl W did not work over accented chars (eg Excuter)<br>
Undo/redo now block select re-inserted text.<br>
Added Tools/Translation Assistant.<br>
Enhanced bind/shroud to cope with 2.5<br>
    </SMALL>

<tr><td align="center"><a href=Z015.ZIP>0.1.5</a><td align="center"><small>13/05/2005</small>
    <td><SMALL>
Enabled/disabled menu entries and toolbuttons.<br>
Added toggle specials button to the toolbar.<br>
Added bind/shroud, Run, Jump to error, file and directory compare, 
Find in Files, and Macro to the Tools menu.<br>
Extended eama.ew to allow integration of standalone utilites.<br>
'not' and 'unary minus' now correctly rejected by Window Painter.<br>
Added Auto Save On Tab Switch to edita.ini (default False). There is 
as yet no way to change this setting other than by editing edita.ini.<br>
BUG: undo of a multi-line deletion was re-inserting the text wrongly.<br>
Made edit actions update the quickjump table, and removed line nos.<br>
BUG: *.EXW (as opposed to *.exw) files incorrectly syntax coloured.<br>
    </SMALL>

<tr><td align="center"><a href=Z014.ZIP>0.1.4</a><td align="center"><small>01/05/2005</small>
    <td><SMALL>
Fix to mousewheel, toolbar.<br>
    </SMALL>

<tr><td align="center"><a href=Z012.ZIP>0.1.2</a><td align="center"><small>27/04/2005</small>
    <td><SMALL>
Added autoindent, wordwrap, F12 ex.err file handling, shellExecute for .html
and .bat files, and numerous enhancements and bugfixes to Window Painter, 
Colour dialogue, OVRstrike mode, and block comment/indent.
<br>
Experimental (incomplete) routine list (Ctrl Q) added, and experimental 
display modes (direct as per 0.1.1, using a standard offscreen bitmap, 
and using a DIB section). See readme.txt for details.
    </SMALL>

<tr><td align="center"><a href=Z011.ZIP>0.1.1</a><td align="center"><small>16/04/2005</small>
    <td><SMALL>
Several bug fixes, Goto line command.
    </SMALL>

<tr><td align="center"><a href=Z010.ZIP>0.1.0</a><td align="center"><small>15/04/2005</small>
    <td><SMALL>
Some more bugs in undo/redo. Find/replace. Optional components (Print, Print Preview, Report
Painter and Window Painter) added.
    </SMALL>

<tr><td align="center"><a href=Z009.ZIP>0.0.9</a><td align="center"><small>03/03/2005</small>
    <td><SMALL>
Added message to prove identified window really is edita. (AG)
Fixed problem with I-Beam cursor and focus on main edit window (AG)
Fixed scrolling problem when typing past end of screen (AG)
Reorganised and renamed language files as ealng_de.txt and ealng_en.txt. (JL)
Removed LANG=#409 (ie English) in eaxlate.e
Column selection undo/redo reworked.
    </SMALL>

<tr><td align="center"><a href=Z008.ZIP>0.0.8</a><td align="center"><small>01/03/2005</small>
    <td><SMALL>
Added support for drag and drop files.

Added single instance handling and open file(s) specified on command line.

Now checks for files needing saving before close.

Rewrote menus and added translation (see eatext_de.e and eatext_en.e)
Language choice is based on control panel, regional settings (see also
eaxlate.e).

Made the horizontal and vertical scrollbars attach to the edit area, not
the entire window. Added "Permanent Scrollbars" option to reduce screen
flicker when switching tabs. If this is set, the horizontal and vertical
scroll bars, if in use, remain visible, so the window does not need a full
repaint when switching between long/wide sources and short/narrow ones.

Added most of the code for Run (F5).

Bugfix: undo/redo of (un)comment/indent always applied to line 1.

Completed tab context menu and associated directory handling.

Added Ctrl Shift PageUp/Down to re-order file tabs.

Added I-Beam cursor when over edit area.

Edita now opens readme.txt when it is first installed (ie no edita.ini file)

Completed line length handling (for the horizontal scrollbar).
    </SMALL>

<tr><td align="center"><a href=Z007.ZIP>0.0.7</a><td align="center"><small>17/02/2005</small>
    <td><SMALL>
Date and time in the status bar now show the locale user default settings
(as set in control panel, regional settings).

Added tab text colourisation to show file requires saving. The tab colour is
properly reset by undo to the exact point of the last file save.

Save as now resets the syntax if save with a different file extension, esp. if
saving an [untitled] (aka new) file, and also resets the tab bar text.

Some bugs in text selection near the end of a line and in text deletion fixed.

Added context menu to the edit area.

Added Capture console i/o. Pressing F5 runs test2.exw as a demo. [More work is
required to complete the run program logic, esp. save files before run].
Output is in a new re-sizeable message area.
    </SMALL>

<tr><td align="center"><a href=Z006.ZIP>0.0.6</a><td align="center"><small>07/02/2005</small>
    <td><SMALL>
    Font settings not saved,
    Accelerator keys,
    File save with automatic backup,
    URL highlighting and double click launch,
    Doubleclick and Ctrl W select word,
    Column selection via Alt key (and mouse, cursor keys, shift, ctrl etc),
    Bug in undo/redo when unindent/uncomment partially applied to selected lines.
    </SMALL>

</table>
<p>
</body>
</html>


Version 0.2.6
=============
The Braces section has been moved below Operators in the .syn files and is
 now limited to a maximum of 7 nested colours, previously was 9, which was
 overkill and didn't fit the Colours window which now shows these levels in 
 (.(.(.(.(.(.)))))) format rather than the less intuitive Brace1, Brace2... 
 Based on a suggestion by don cole.
10/11 Bugfix: Moving the mouse over the routine drop-down on the toolbar when 
 another window was open (eg find, help, options etc) would 'steal' focus from 
 that window.
15/10 Fixed a problem in background scan whereby include files which also
      existed in filepaths[currfile] (rather than the actual directory of 
      the file being scanned in the background) would be added to the project 
      tree, and possibly vice-versa [ie some files could be omitted unless 
      the including file was scanned when the current open file was in the 
      same directory as the file being scanned in the background, iyswim].
      Verify edita.edb with full background scan is needed to correct this,
      though it is normally only visibly wrong in the ".." entry.
16/10 Bugfix: A crash would occur if the menus were hidden (Shift F11) and 
      either Ctrl Shift H or the toobar "paragraph" button was pressed.
      Additional edits were made to guard against non-existent menu entries,
      such as might occur if menu text were set to "" in ealng_XX.txt.
16/10 decimal points in numbers were coloured illegal.
16/10 Block select zero characters (eg by Shift RightArrow, Shift LeftArrow)
      paste, undo -> undo/redo "whoops".


Version 0.2.5
=============
04/10: fixed machine crash updating the project tree (added anti-rentrant
flag alreadyResettingProject to eadir.ew). Also fixed an index out of bounds 
in TVN_GETDISPINFO handling (presumably something in progress at the point 
the tree contents switched), and also removed DoEvents(0) calls from DBopen, 
since that was also a primary cause (and not needed since the introduction of
gMFstate handling in 0.2.2).
6/10: Fixed a problem with ex.err parse: strings ending in ,10} were not being
converted (to ..\n") properly.
7/10: Added directory field to bottom of project tab. This is useful in the ".."
entry, for example if you have database.e included by two copies of eaedb.e,
it shows which is D:\edita and which is C:\temp\edita\test.
10/10: Added C.syn (incomplete). Minor modification to easynld.e to make Escapes
section properly optional. The constants, types, and clib sections ought to, in
theory, contain thousands of entries; should anyone want to help fill them, let
me know (or just email me an updated C.syn file). [See also the windows API list
in fasm.syn, I'm sure that can be copied] Actually, I've not really ever seen C 
code syntax coloured before (yes, I've led a sheltered life), so I may be making 
several basic errors. Likewise, if anyone wants a go at parsing C files to create
the equivalent list of routines, let me know.
16/10 added additional call to enableMenuToolBar in idle routine, significantly 
improving responsiveness when, for example, file a is modified (not a .e* file) 
and switching to file b (which is a .e* file); previously the run option would 
remain disabled until /all/ background processing was complete.
17/10 wiped the globals database in vedb.exw prior to the 'full background scan'
(as added 5/10, also in 0.2.5). Sledgehammer to crack a walnut perhaps, but it 
certainly fixes an odd anomaly or two lying in wait (previously caused the error
global database lied, not reported externally but an occasional occurence here).
18/10 Added Y/N etc key handling to error message routine (to match messageBox).
02/11 Replaced system_exec with system as suggested by RC in eabind.ew
03/11 Updated fasm.syn with MMX, SSE, etc sections and a (large) win32 api list.
06/11 Suprious comma in eacons.exw removed (thanks to Greg Haberek),
      Finally tracked down an intermittent problem with the file open dialog
      repeatedly reappearing. It used to happen to me about once a fortnight,
      but thanks to Greg I managed to hunt it down.
      Enhanced code folding to a single if/elsif branch, unless on the end if,
      or elsif/else is on the very next line.
      Ctrl _/- and +/= keys now also trigger fold/unfold (previously only the
      numpad keys worked).
      Allowed mouse clicks on the fold/bookmark margin to expand/collapse folds.
      Added new .ini option (which will appear in edita.ini when 0.2.5 is shut 
      down for the first time) which makes the fold margin permanent, so it can 
      always accept mouse clicks ("Permanent Fold Margin", default False).

Version 0.2.4
=============
Folding two blank lines would 'trim' from both ends to create a 
 negative fold, causing a fatal error.
A bookmark hidden inside a fold prevented subsequent folds and 
 bookmarks displaying properly.
Full screen mode was misbehaving if the file panel and/or message area were 
 visible, which might well have been the problem reported by DB James aka Quark.
Return from full screen mode restores window rather than always maximising it.
Moving to end of a long line did not redraw correctly (introduced in 0.2.3)
Removed WM_CONTEXTMENU handling; replaced with check for VK_CSM (aka VK_APPS)
 in virtualkey. Previously, the control key had to be held down until the menu 
 actually appeared, to get the tab context menu rather than the edit area menu.
Removed screen flicker introduced by use of ExtTextOut (in 0.2.3)
Recovery tab now selects the current file properly, and shows '+' only if the

********
If you open a backup file and right click anywhere on the edit area, a restore prompt is now offered.
********

Added 'focus memory' to arwen (for use when Alt-Tabbing). It now returns 
 focus to the previous field after Alt Tab, and forces focus to the parent 
 window when a child is closed (it used to vanish). (see PLaf in arwen.ew)
Full Screen mode no longer clobbers the Windows taskbar if it does not have
 the autohide option enabled.
Removing the last fold or bookmark now removes the margin.
Added new ClearOverStrike option to .ini file to auto-disable OVR mode, since
 I often hit Insert, when aiming for Home.. See eanotes.txt for more details.
Crash on Ctrl Page Up when tabbar not visible. Ctrl Page Down was inoperative.
Added """ (triplequote) handling to language files. The file ealng_XX.kbh is 
 (or soon will be!) no longer required.
Added Verify edita.edb option to the tools menu. Previously, problems with 
 this file could only be solved by deleting it, losing bookmark, fold, and
 backup details. The program (vedb.exw) can also be run stand-alone.
New ini file option "Automatic Backup" defaults to 1. If set to 0, it does
 not make backup copies of files (in edita/backup) before overwriting them.


Version 0.2.3
=============
Bugfixes: index out of bounds, subscript atom in saveFolds
Fold all crashed if the toolbar was not visible (Steve A)
Context help crashed if EUDIR not set (Al Getz)
Double click on fold/bookmark border crashed (Tony Steward)
100% cpu usage when all files closed (Greg Haberek)
Vertical scroll bar incorrect after Alt -
Gave the bookmark/fold margin a white background.
Underscore characters not cleared when folds active:
 changed use of TextOut to ExtTextOut with ETO_OPAQUE.


Version 0.2.2 08/09/2005
========================
Added block comment handling (to .syn files, for the benefit of eg html, c/c++ 
files, not really of any use with Euphoria source files, unless you are using 
a modified run-time). [Update: Phix has block comments!]

Added Html.syn and bat.syn

Added bookmark handling:
  Ctrl F2 toggles a bookmark on the current line (a '*' appears in column 1; if
    needed, text is shuffled over one column to make way for it.)
  Ctrl Shift F2 removes all bookmarks
  F2 moves to the next bookmark, if any
  Shift F2 moves to the previous bookmark, if any
Added routine and block folding.
  If Ctrl - is pressed when a block of text is selected, or the cursor is on 
  one of: global, procedure, function, type, if, for, while, end, or a bracket 
  spanning more than one line, (namely the same conditions for Ctrl [ handling, 
  less elsif and else), then the appropriate block is folded and a '>' appears 
  in column 1.
  Ctrl + unfolds a block, as do find, goto line, F12 error handling, etc.
  Alt - folds all routines and Alt + removes all folds.
Blocking over a folded line and cutting/copying/deleting/pasting incorporates
all folded lines if the (usually invisible) end of line marker is selected.

Bookmarks and folds are saved between sessions (providing the file is not 
modified externally).

Fixed problem with background processing freezing the editor, particularly at
startup on a slow machine.

Run program now calls WaitForInputIdle once, with a maximum timeout of 750ms (0.75s).
This should allow ample time for the program to load and start, before background
processing kicks in (checking for modified files etc.) Previously, the timeout was
effectively infinite, which would cause problems for any program which did not open
either a gui or a console window early doors, and cause Edita to remain almost
(but not quite) completely unresponsive until the invoked program terminated.

Toggling the scroll bar, and filetab visibility, with the File Panel visible did 
not repaint correctly.

Alt Insert and Alt Delete (comment and uncomment) were inoperative when the File
Panel was visible.

Fixed crashes when EUINC not set and Find in Files when a null selection in force.

Fixed one cause of the 'routineset wrong (not critical)' error. However, I have 
experienced a couple of other cases this occurs in (therefore it is not completely
fixed). [Ctrl Q always rebuilds the routineset from scratch; it checks, warns, and
replaces the incorrect set. The routine drop-down, Ctrl [, and now routine folding
may be out slightly when routineset is incorrect; there are very few cases where it 
could cause any real harm.]

Enhanced uncomment (Ctrl <, or Alt Delete) to remove '<' and '>' when processing 
one or more lines from the result of a file compare (based on whether the first line
begins with either '<' or '>').

Added a crash button to the 'No translation for' warning when running in debug mode.

Reorganised edit menu.
Added Cut prepend (Alt Shift X) and Copy prepend (Alt Shift C) [to the main menu only,
not the context menu]. Removed Cut append and Copy append from the toolbar.

Swapped the direction on Ctrl [ (now back) and Ctrl ] (now forward) to be more logical.

Plus version now ships with public domain 2.5 files. The bound files in both the Full 
and Plus versions are still created with 2.4, however.


Version 0.2.1 19/08/2005
========================
BUGFIX: prevRtnIdx has not been assigned a value (reported by Bob Elia).
BUGFIX: Common Code analysis entered infinite loop (reported by Bob Elia).
    Also made it jump to the line in error.
BUGFIX: Options menu checks cleared by fullscreen mode (reported by Juergen Luethje).
Added Capture Console Output (use exwc.exe, permanent) to the Parameterised Run (Ctrl F5)
window. Console capture seems to be possible only via exwc.exe, hence a console window
will always (briefly) appear when this option is checked. The setting is saved against
the current file path and name.
Translation assistant now puts the current version in the output. (as suggested by Juergen Luethje).
Fixed a minor problem with saving global includesets on modified files.
Removed doEvents(0) calls from DBopen as they could cause problems.
Allowed Ctrl+Alt keyboard entry (reported by Juergen Luethje). 


Version 0.2.0 16/08/2005
========================
Cleaned up the code in eaclip.ew.

Fixed a display problem with non-permanent vertical scrollbars.

Switching file tabs after amending syntax colours reset them. (This bug
was introduced in 0.1.9)

Made Alt keys affect the project and directory treeviews when visible.
(To perform column selection when the file panel is visible you must use Alt 
Shift and the mouse.)

Alt Home and Alt End left the old current line highlit.

Added Ignore Whitespace option to file compare.

Added a ComboDropDownList of routines to the toolbar. The current routine is
automatically updated when the cursor moves. Thanks to Bob Elia for the idea.


BUGFIX: Directory list would select test.e when it existed instead of test.exw.
BUGFIX: All charMaps now use 1..256 rather than risk crashes using 0..255.

Added keyword translation handling
==================================
If ealng_XX.txt contains "and" = "...", then eaxlate.e starts loading keywords 
up to "abort", and then loads builtins. See ealng_en.txt for a (commented out) 
example.

The source files and the clipboard are always in English; translation occurs
whenever a file is loaded or saved, or text is copied to or pasted from the
clipboard. This means the standard English version(s) of ex.exe and exw.exe
can be used, and you can post English code to EUforum, or get English code 
from there and paste it into Edita for instant translation.

This means that with a suitable ealng_it.txt (and if the locale setting on 
Control Panel, Regional settings is Italian) one could have:
<eucode>
globale funzione get_routines(numero i)
    se sequenza(routines[i]) allora
    ritorna routines[i]
    fine se
    ritorna {}
fine funzione
</eucode>
and then run it on a standard, unmodified exw.exe. There is no logical reason
why routine and even variable names could not be translated, except that there
is a danger of ending up with a huge translation file.


Note that translations for standard functions (and also things like win32lib) 
have not yet been tested, but there is no reason to suspect that they will not 
work. Also note that (eg) Euphoria.syn should be language-neutral; the indent
and autocomplete sections should remain in English but they can be translated 
via ealng_XX.txt, for example ealng_it.txt might contain the line:
"^ i&f | then^pend if" = "^ s&e | allora^pfine se"; whereas the Euphoria.syn
line "Indents + then do else - end" relies on individual keyword translations.
<aside>
  The problem with attempting to translate "^ i&f | then^pend if" by looking
  up the individual keywords is that the trigger character (&f) position is 
  language-dependent. Eg "integer" vs "include", in English, suggests the 3rd
  character must be used as the trigger, and it is not difficult to imagine a
  case where a 2nd character trigger which works fine in English might need 
  to be the 3rd in another language.
</aside>

In a more recent test, I translated the builtin length() function to "len",
which clashed with a number of variables I had declared with the same name,
causing compilation errors. This time it only took a few moments to replace
all use of the variable(s) len with "lng" (and leave calls to len() alone!).
However you should be aware that such collisions are possible, although
quite unlikely. A program which works fine in English with English keywords
is simply not guaranteed to continue to work once translated; but hopefully
over 99% will. Thankfully, and on the plus side, it is a fair bet that all 
such problems will be immediately caught as compliation errors, rather than 
introducing (subtle) bugs at run-time.

I have tested this on edita.exw, and made the required changes to control flow
(Ctrl [), autocomplete, autoindent, and quick jump.
If F1 is keyed on "numero" above, then help from ealng_XX.exh is displayed; 
Please note that ealng_XX.exh should //actually// contain "integer",
though editing it within Edita may show "numero" if "integer" is translated
to "numero" (after "and" in ealng_XX.txt) and Euphoria.syn has .exh as a 
recognised extension (which it does in the standard release). All the comments
in ealng_XX.exh still require manual translation.

Lastly, after editing ealng_XX.txt, you may experience errors 
"global database lied". For now, please delete edita.edb.

Added new .ini file option for Don Cole, "Single Dir Tabbar". If this is set
to 1, the tabbar only displays files from a single directory. The other files
remain open, but are hidden. Opening a file in a different directory causes
the tabbar to be rebuilt.

BUGFIX: Ctrl N (New file) could hang as background processing attempted to 
process "[untitled]" (introduced 0.1.9)

Added new .ini option: "Move Cursor On Scroll". If this is zero (the default)
then using the right-hand vertical scroll bar will change the view but leave 
the cursor off-screen, so (eg) keying left/right arrow will jump the display
back. If this is one, the cursor will remain on-screen, on the same relative
line to the top of the screen, however any blocked text will be unblocked,
unless the shift key is held down while moving the scrollbar.

Found a bunch of missing translations in Quick Jump.

BUGFIX: Ctrl Z (Undo) could leave two lines highlit.

Enhancement: F1 help now scans the project tree, so for example "create" in
edita.exw will show help from arwen.ew rather than win32lib.ew because it 
includes the former not the latter. This also means that if you have several
projects which use several different versions of win32lib, it will show the
correct version details.

F1 help on builtins now offers to open the Euphoria reference manual (instead of
lang/ealng_XX.exh which was not much use to anyone).

BUGFIX: the tooltip for the backgroung processing togglebutton was always set
to (on) during initialisation, even when the option was off in the .ini file.

BUGFIX: Ctrl D was doubly-updating routines[currfile], which lead to a pop-up
error "routineset wrong (not critical)".

Added a retry loop to the db_open call.

The "Replace Tabs with spaces" .ini option now works. Note that this is on by
default, and on a slow machine, while as much of the load overhead as possible
has been moved to background processing, it may significantly increase save
time, for example on a 7-year old 233MHz PII with 48MB saving win32lib leaps 
from 4 seconds to 8 seconds. (Even then, four seconds is not an excessive
extra overhead for a 35,000 line file, and of course it will be much less on
newer machines.)

Added ".." entry to the project view if a subcomponent is included by several
other files. For example, file.e might show entries for edita.exw, easynld.e,
eadir.ew, eaxlate.e, database.e, and eafif.e. In the ".." tree, only the top-
level entries are shown; if one is selected the file will be opened and the 
full project tree for that file shown. Note that for some libraries (eg win32lib)
this tree might become /VERY/ large, so some caution might be in order before
opening it.

Added fullscreen mode. This is toggled by F11. In fullscreen mode, the current
filetab occupies the entire screen area; the titlebar, menus, toolbar, tabbar,
file panel, scrollbars, message area, and status bar are all removed. If there 
is anything you want which is not immediately available as a keyboard shortcut,
press F11 to turn off fullscreen mode first. I expect most people will have a 
pet feature they think should remain in full screen mode; if you (or I) were 
to include them all then fullscreen would end up identical to normal mode :-) .

Escape also turns fullscreen mode off.

The display of the menu bar can be toggled by pressing Shift F11. 
There is no equivalent menu entry or .ini file setting.


Version 0.1.9 01/08/2005
========================

Made Auto Complete multi-syntax, so you can now have different autocompletions
in a .exw file to a .asm file, for example. See eauto.e for more details.

Moved a freshly opened ex.err file tab next to the current open file.

Rewrote string colouring code. The following test set should illustrate the new
colouring scheme (copy and paste into a .e[x,xw] file):
--'
--'m
--'m'
--'mo
--'mo'
--'\
--'\m
--'\m'
--'\mo
--'\n
--'\n'
--'\no
--"
--"m
--"m"
--"mo
--"mo"
--"\
--"\m
--"\m"
--"\mo
--"\n
--"\n"
--"\no
--"\no"

Added single instance handling to eama.ew so that test (windows) applications
can shutdown any existing instance of that program. Here is a complete example:

<eucode>
 global function closeExisting()
    return "Press any key" -- send WM_CLOSE to any window starting thus.
 end function
 include eama.ew    -- uses routine_id("closeExisting") to see if "" defined.

 include arwen.ew

 constant Main=create(Window,"Press any key to start Test",0,0,100,100,400,400,0)

 WinMain(Main,SW_NORMAL)
</eucode>

One area I have found this to be particularly useful is when running applications
which use database.e, either before I have added locking, or when that locking
stops a second instance of the application dead in its tracks. Edita has also
been modified so that it only performs SetForegroundWindow, (when it detects that 
a program it launched has terminated), if there is only one program still running 
which was originally launched from Edita.


Keywords "then", "do", "else" and "end" in comments and strings were incorrectly
affecting the indent of subsequent lines. Added a new Indents section to the 
syntax files to make such processing as language independant as possible. It also
works for [some] single characters, eg { and } (see Euphoria.syn and FASM.syn).

New version of ealng_nl.txt (Dutch translation file) provided by Tommy Carlier.

BUG: (introduced in 0.1.8) overstrike mode was duplicating the addAction call, 
which made undo/redo get things wrong and generally throw a hissy fit.

Swapped font and colour buttons on the Tabbar and added a help button. Also made
comment/uncomment use the comment specified in the .syn file.

BUG: 0.1.8 did not handle edita.edb created under 0.1.7. (Fixed, but see below)

Find in files, file and directory compare, and translation assistant no longer
use the clipboard.

The file and directory names in edita.edb were being held without case conversion,
which caused a problem if the real file was Arwen.e but a program included arwen.e
To avoid this problem, file names are now stored in lower case and directory names
in upper case. This may mean that existing edita.edb files cause problems, which
are easiest to solve at this stage by deleting any old edita.edb file before 
installing 0.1.9.

SelectWord was blocking all of "a..b" (less the quotes).

Added background working icon to the toolbar. When the triangle is red, background
tasks are outstanding, once they are complete it turns grey. It is also possible
to turn off background processing by toggling the button (or the options menu
entry), in which case the triangle will (soon) turn red and stay that way.
--The icon can be removed from the Toolbar by setting the translation for "Background
--Processing (on)" to "" in ealng_xx.txt. Note that if the Options menu entry is
removed (by setting the translation for "Background Processing" to "") then 
neither the Options menu entry nor the icon will appear, and whether or not any
background processing occurs will be determined by the value in the .ini file.

Background processing scans files for globals and include statements. Only files
with extensions specified in Euphoria.syn are processed. If the main project file
is open (eg edita.exw), Edita will find and process all include files automatically.


Added the Project Tree.
When files are saved, or first opened, they are added to the background task list.
The project tree shows the include statements detected in the source file(s).

If the file is only included by one other file then the project view will also
shown details of that parent file.

If more than one include statement has been detected for the file, only the 
subproject is shown, unless the file is already part of the project currently 
being shown.

For example if the current open file is arwen, a project tree for arwen is shown.
If eacolour.ew is opened (providing that edita.exw has previously been scanned), 
the edita project tree is shown. At this point if arwen is re-selected, the Edita 
project will remain, because arwen is recognised as a subproject of it. However 
if some other file is opened (eg readme.txt) the project tree will be replaced 
since there is no include statement for that file in the edita project tree, and 
then switching back to arwen.ew will show just the arwen project tree.

FAQ: When I show the project tree for edita.exw, it lists eaclip.ew and eafind.ew
=================
in the project; if I switch to either of those the project tree remains. However,
if I switch to say ex.err (the project tree is replaced by a single ex.err line),
then switch back to eaclip.ew, I get a single line for eaclip.ew, whereas if, from
ex.err, I switch to eafind.ew, I get the full edita.exw tree as expected. Why does
switching to eaclip.ew not show the full edita.exw tree?
A: The short answer is that the full project tree is only guaranteed to be shown
when the main project file is open. The longer answer is:
If eaclip is included in a second project (eg test.exw), then it assumes that
eaclip.ew is a subproject/cannot (automatically) know that eaclip.ew is really
part of edita.exw and the include in test.exw is just a test. There is, as yet,
no code to "clean up" the project details if test.exw is deleted. For a short-
term fix, delete test.exw, close edita, delete edita.edb and re-start edita.
The project details will be automatically reloaded (which should take less than
20 seconds even on a very slow machine), and it will not log eaclip.ew as 
belonging to two projects.
[Update 4/10/2005: Tools/Verify edita.edb now cleans up project details]

The Projects menu has been removed, since project details are now accumulated 
automatically. Phix/Euphoria source files may also contain special comments, eg:
--#include lang\ealng_en.txt
which adds the specified file to the project tree but does not, of course,
affect the normal running of the program. Such comments must begin in column 1.
If the --#include line specifies a file ending in one of the file extensions
specified in Euphoria.syn, and that file exists and contains further --#include
lines, a subtree is created.

After changes to the include (and --#include) statements, and the file is saved,
the project tree is automatically updated.


The builtin context help file, lang/ealng_xx.exh, is now automatically processed
(by background processing, if it has been altered).

BUG: The copyTextToClipboard function was using the internal 100K label buffer,
so if you copied the whole of say win32lib.ew (at around 1MB), it would cause
severe memory corruption. Since these changes caused a few problems, the old 
style code is still available in eaclip.ew, for emergencies, but I plan to 
remove it next release.

Ctrl W (select word) was including tabs, spaces, and paragraph marks when the
"Show Formatting (Ctrl Shift H)" option was checked.

Added translation sections for keywords and builtins to ealng_XX.txt. At this
point, these only apply to a file named "test2.exw", and will depend on saving
files with tabs replaced by spaces, which also only applies to test2.exw as 
things stand. Further work is required for clipboard handling, plus I want to 
reinstate and enhance the automatic backup facility (which I disabled in 0.1.7) 
--before unleashing this on my files, let alone everyone else's.


Version 0.1.8 19/07/2005
========================

Fixed a glaring hole in the forward and backward scan of groups in common 
code analysis, leading to many matching lines not being reported. This would
happen if the backward scan thought the line was part of a previous group, 
--when in fact the forward scan hadn't picked it up (or maybe vice versa!).

Added record deletion ability to tedb. Note that if you modify tedb.edb, for
example to remove details of a database no longer on your hard drive, then
the next time tedb.exw is run, a warning about possible corruption is
displayed; this is expected and automatically corrected. Also added doLower
to avoid mis-sort of ints, eg 69,70,101,102.

Shift Page Up/Down now block to the first line, column 1/last line, last column.
Previously, when the cursor was on the first/last screen, it would not move.

Fixed a minor problem in ppExf (it was returning a trailing '\n', which it
is not supposed to).

Prevented the editor from opening both dir\xx.e and dir\subdir\..\xx.e.
(This condition arose from an include ..\eaxlate.e statement, which 
 in turn left D:\edita\pp\..\exlate.e:1165 in the ex.err file)

Stored directory and file details in edita.edb, for context help.
The file edita.edb preserves useful information permanently, but if any problems
arise it can be deleted and will be recreated automatically.

Invoking Quick Jump or pressing F1 now saves the global routines defined by the
current file in edita.edb.

--F1 help added. Note that unlike MEditor, which used an explicit "Parse for 
--globals" utility, the information required is gradually learnt, as noted above.
Also, Edita retains global information from more than one directory, which
MEditor could not. It may be possible to write a directory/project/current 
file scanner for edita, if demand is sufficiently high.

 (Disclaimer: the global information is not yet "purged", for example if you
  remove the global keyword, there is as yet no way to make edita remove the
  corresponding global information (short of deleting edita.edb), it will 
  still think that global is defined in that file. [WARNING: manual deletion 
  of individual records in edita.edb will foul up the uniq record numbering])

BUG: finding "\nXXX" (ie blocking the end of a line and part of the next) would crash.

Moved translation files into a new lang subdirectory. As well as the existing
ealng_XX.txt files there is also ealng_XX.kbd containing basic keyboard help, and
ealng_XX.exh containing builtin descriptions (although the latter is not yet loaded
automatically; you have to open it and press F1, which as above, stores the needed
info in edita.edb). The file extension exh has been added to Euphoria.syn.

Shift F5 (repeat previous Run) now runs from the same directory as before. Fixed a 
crash when None.syn could not be found (comment unassigned), and stopped it showing
garbage on/enabling the Toolbar when \bitmaps\eatools.bmp could not be loaded.

Rewrote the bracket colouring code. Added new "bracket carry-forward" handling to 
cope with code such as:

void = messageBox(sprintf("Error in line %d, column %d",{tokline,
                 tokcol}),
      sprintf("%s\n%s^ %s.\n",{t1,
               repeat(' ',tokstart-1),
               msg}),
      MB_ICONEXCLAMATION + MB_OKCANCEL)

This information is held in a sparse array, for example win32lib at 34,723 lines
creates a bracket carry-forward array of 602 entries. The downside is that this
adds a small additional delay on load (probably less than 0.2 seconds for win32lib 
on a 2GHz box, though).

Mismatching brackets are now coloured illegal, eg ")" in {{)}.

Fixed a bug with ComboDropDown controls (eg Find, Parameterised Run) whereby the 
drop-down icon was not responding to mouse clicks. This was caused by intercepting
the WM_COMMAND message for the subclassed edit control in SubProc.

Shift F4 now finds the previous difference.

--I'm vaguely aware that a few bugs have surfaced in file & directory compare, so 
--use those with caution in this release.

Added AutoComplete handling. There is now a new AutoComplete section in the syntax files.
The Euphoria.syn file supplied has entries for if, for, while, global, integer, atom,
object, sequence, function, procedure, and type. See eauto.e for details of the syntax used.
It is theoretically possible to define code templates by editing the .syn file.

AutoComplete can be disabled by unchecking the entry on the options menu or by using the 
togglebutton on the toolbar. Any text added by this feature can be removed using the normal
undo function (Ctrl Z). AutoComplete does not occur if any text is blocked, if the editor
is in OVRstrike mode, and/or in most cases if the cursor is not at the very end of the 
line (including invisible spaces and tabs).



Version 0.1.7
=============
Reworked WM_COPYDATA to fetch filenames etc one character at a time, so this should
now work on windows XP (specifically print preview and window painter).

Added limited ListView and TreeView support to Window Painter (just enough to stop 
it crashing and overwriting stuff, full support will have to wait).

Disabled the automatic backup feature (see constant makeBackup=0 in edita.exw),
since it was not really achieving anything apart from wasting disk space.

Prevented the automatic saving and backup of [untitled] tabs.

Added the "old" style quick-jump pop-up. A new ini file option 
"New Style Ctrl Q" has been added. When this is set to 1, the quick jump table 
is "docked" to the main screen. There are a number of problems with this 
(mainly focus), which is why the old style quick jump code was resurrected.

Added directory tree to the File Panel. When first displayed, the focus is set
to the current file (if any). Files may be opened by double clicking on them,
but there is no way this can be done from the keyboard (yet).

Ex.err files are auto-preprocessed to make strings readable. There is a new
option, Reformat ex.err, on the options menu. When this is checked, and an 
ex.err file is loaded, it is preprocessed to make strings more readable. The 
ex.err file itself is not modified, so the full details can be recalled by 
unchecking the menu option and selecting ReOpen from the tab context menu. 
As an example of a case when you might need to do this, consider the Arwen
internal variables ObjectLabel and ObjectChildren. Whereas ObjectLabel is
indeed text, the latter is likely to display as eg "HIJKLM" when in fact
{72,73,74,75,76,77} would make more sense, because ObjectChldren contains
lists of (sequentially-allocated) control-ids. It is not practical to make 
the preprocessor understand that it should process one and not the other.
Note that if the ex.err file is deliberately modified, and (possibly 
automatically) saved, (eg on tab switch) then this reload technique will 
no longer be possible.

Made the automatic opening of ex.err check that dir(crashpath&"ex.err") has
altered in some way since the program was invoked. This prevents, for example,
a Ctrl C manual interruption of a program from opening an old, irrelevant file,
and similarly if the program has changed the current directory before crashing,
edita will no longer misleadingly open the wrong ex.err file.

Math function overflow in eascan, getFloat(), processing eg 1.0E-300
    I had coded exp = exp*10 * Ch-'0' instead of exp = exp*10 + Ch-'0', and 
    exp (which will tend to end up very large and negative, eg -11082288) is 
    later used in the expression tokatm = tokatm * power(10,exp*esign).
    In short, it will likely crash on almost any (real) number.

Fixed subscript crash loading files containing binary zeroes. Also made the
default text colour "Other" in easynclr.e, should syntax colouring be aborted
because a binary zero is detected.

BUG: Ctrl D (duplicate line) was not being added to the undo/redo list.

Further tweaks to undo/redo to properly block the re-inserted/undeleted text.
Made Escape cancel the current selection. The selection is now also cancelled 
when toggling from overstrike to insert mode.

Added Options/Backups; the current file can now be automatically saved at a 
user-defined time interval. Set this to 0 to disable automatic backups.

If edita.ini is amended by hand, then it is no longer automatically re-written 
(thus losing the manual updates) at shutdown.

Fixed the focus problem with translation assistant. The same methodology 
(using addFocus/removeFocus) has been applied in about 10 other places.

Internal change: the main debug flag has been moved to the ini file to remove
the risk of a release being made with it left on. If the single instance check
detects that another copy of edita is already running, and the debug flag is 
set, then it continues in debug mode (not opening pervious session and not 
saving the .ini file on exit). Hence double clicking on a file in Explorer 
will open a blank editor when the new flag is set.

Added run program to the toolbar

File compare would display the progress window over any error message.

Added ListView handling to setIndex in arwen.

"Symbols" replaced with "Operators" throughout.

Saving a syntax file (.syn) now reloads (all) the syntax details. Created
FASM.syn during testing of this feature.

F3 and F4 were not repainting the current line when no text is selected.

include subdir\file.e coloured the \ and the . red.

You could not set the current line colour on "None" (eg .txt) files.


Version 0.1.6
=============

Fixed around two dozen misc crashes when no open files (eg trying to save when
there is no open file gave a subscript 0 error).

Made single instance restore a minimised window.

Find and find in files now open with the search text selected.

Found and fixed a problem whereby resizing the file panel left the edit area blank.

Alt '<' was not unindenting properly (and crashing on .txt files).

Ctrl W did not work over accented chars (eg Excuter)

Undo/redo now block select re-inserted text.

Added Tools/Translation Assistant.

Enhanced bind/shroud to cope with 2.5 (only tested by creating a dummy "bin/bind.il")


Version 0.1.5
=============

Enabled/disabled menu entries and toolbuttons

Added bind/shroud processing. The first line of the source being processed is
examined, unless it is exactly "--Parse:Skip" when the second line is used.
If it begins with "--" and is followed by either "Bind:" or "Shroud:", then 
this becomes the default action for that file. It may be followed by "-list"
and/or "-clear", and/or "-icon" followed by a filename which must end in ".ico".
The remainder of the line, if any, is taken to be the output file. Eg:
--Bind: -list -clear -icon 95.ico edita.exe
Note that unlike quoted strings, paths should contain single backslashes.
Also note that icons are only applied to files ending with ".exw", and, of
course, only when they are being bound as opposed to shrouded.

Extended eama.ew to allow integration of standalone utilites with Edita. 
Initially, eabind.ew was a standalone component, but since it added 128K doing
it that way instead of 6, I ditched the idea. However the source may be useful
(available on request) as a reasonable example of how to integrate a new, and
otherwise standalone utility into edita. A small mod is required to eamenus.ew
(see function ToolMenus()) which would ideally be based on information kept in
edita.ini.

Added toggle specials button to the toolbar.

Unary minus and not now correctly rejected by Window Painter.

Added Run, Parameterised Run, and Jump to Error to the tools menu.
Shift F5 runs the last command again, even if editing a different file. 
Ctrl F5 (Parameterised Run) opens a dialog window with the command line which
would normally be executed as the default. Ctrl Shift F5 opens the same dialog 
window with the last command line as the default. In both cases a list of all
previously run commands this session can be opened and selected from. It is 
also possible to enter any command required into this dialog box.

Added Auto Save On Tab Switch to edita.ini (default False). There is as yet no
way to change this setting other than by editing edita.ini.

Added file and directory compare to the Tools menu.

BUG: undo of a multi-line deletion was re-inserting the text at Min(selX,CursorX)
which is actually only valid if CursorY=selY, also if CursorY>selY then it should
always use selX and if CursorY<selY then it should always use CursorX. (A selection
is from selX,selY to CursorX,CursorY, but may be made either forwards or backwards.)

Made edit actions dynamically update the quickjump table, and removed the line
numbers.

Added Find in Files to the Tools menu.
Added Macro to the tools menu.

Fixed several minor problems in the colour dialogue:
    CR and escape handling added,
    Accelerator keys were not working,
    Focus jump when mouse cursor on edit main window.
    Custom colour button had ceased working.
Bugfixes and enhancements to OVRstrike mode:
    index out of bounds when entering text/tab at end of line.
    Enhanced undo/redo to better combine input, eg on "fred", type "123" to
     get "123d". Ctrl Z gives "d", Ctrl Z gives "fred". Previously, Ctrl Z 
     would need to be keyed no less than six times.
    Selecting "fre" of "fred" in overstrike mode and pressing 1 would replace
     _both_ the "fre" and the "d". It now only replaces the "fre".
Added basic wordwrap facility, with toggle on Options menu. At the moment the
    wrap column can only be changed by editing edita.ini.
BUGFIX: block comment/indent was removing the selection. This bug appears to
    have been introduced in 0.0.9.
Added autoindent feature.
Added F12 ex.err file handling.
Started routine list. The dialog is somewhat experimental. The Quick Jump Focus
    button, in particular, should probably be ignored (it is intended as a way
    to select a routine via the keyboard, but it is nowhere near finished).
    The scan times are somewhat slower than MEditor, however a) they are run 
    in the background and cached, and b) the structure is designed to, one day, 
    cope with routine and block folding.
Double-buffered display changes. There are now three available modes:
    1) The original method, displaying direct to screen, is fast but with 
    significant flicker. For this setting, set oldStyle on line 14 of 
    edita.exw to 1. (useDIB, on line 15 is ignored when this is 1.)
    2) A normal off-screen bitmap (oldStyle should be 0 and useDIB 0).
--    3) Using arwen's DIB sections (oldStyle should be 0 and useDIB 1).
    There are a few problems with the palette in method 3, particularly on
    initial load and/or if you switch between a Euphoria source and a plain 
    text file, and back. The colours seem to be reinstated if you Alt-tab 
    to another app and back. It might be something in, or like, reBrush 
    in easynld.e, but I have not yet tracked it down.
    In summary, I want to keep 1, at least as an option, and make a choice 
    between 2 and 3 based on user feedback.
    Methods 2 & 3 may be amenable to significant enhancement, whereas 1 will
    never be. Feedback and suggested improvements welcome. Almost all the 
    relevant code is contained IdleHandler() in edita.exw and should be 
    instantly recognisable because of the tests on the flags mentioned.
    There is possibly some code missing from applyFont() in eafonts.ew.


Version 0.1.1 16/4/2005
=======================

Missing files: dib256.ew, imagelists.ew, ppp.e (AG)
Bound version failed with command_line[1] not exw.exe. (JE,JL)
Bound Window Painter failed with Directory Error. (JE)
MZ not declared [eacons was running "exw eawpaint.exe"] (JE)
Colour Options window off-screen on 800x600 (JE)
French translation added (thanks to Jean-Marc)

Goto command added.


Version 0.1.0 15/4/2005
=======================

Fixed an undo/redo problem with Cut/Paste:
If you had
-- The (blah...)
-- /li /clear( object )
-- /li /copy( object )
-- /li /cut( object )
-- /li /paste( object )
-- /li /undo( object )
And copied "he", then column blocked the 5 "li" and pasted, it worked fine,
however, undo put everything back in the wrong place (and redo crashed as 
it spotted the error).
Also, select 1234, then cut, undo and it was replaced four characters out.

Fixed bug: undo/redo did not always clear current selection.

Added find function, between 5 and 10 times faster than MEditor. Line breaks
can be specified using ^p, tabs using ^t, and ^^ for a single ^. An option to
ignore whitespace has been added. Searches including a ^p are exceptionally 
fast, for example searching for "then" must check a line of 75 characters in
at least 71 positions, whereas eg searching for "then^p" needs only check the
end of each line.

Replace and Replace all functions added.

Added Print and Print Preview to the File menu. (standalone optional component)
Added Window Painter to the Tool menu. (standalone optional component)

Added current line highlight. To disable, set the new Current Line entry on the
Options/Colours screen to match the background.

--New standard include, eama.ew, allows any program to send output to Edita's
message area. Just call eamsg(data). If data is not string-like then a string
representation is automatically created using sprint(). Within strings, any 
Linefeed (\n) characters are replaced with the correct CRLF pairs required 
for the edittext, and tabs are replaced with "\t".

Lastly, I have just downloaded (yet) another zip utility; I think this may be
/the/ one (yeah, love beckons!). Guaranteed I have just fouled something up!


Version 0.0.9
=============

Added message to prove identified window really is edita. (AG)
Fixed problem with I-Beam cursor and focus on main edit window (AG)
Fixed scrolling problem when typing past end of screen (AG)
Reorganised and renamed language files as ealng_de.txt and ealng_en.txt. (JL)
Removed LANG=#409 (ie English) in eaxlate.txt
Column selection undo/redo reworked.


Version 0.0.8 
=============

Added support for drag and drop files.

Added single instance handling and open file(s) specified on command line.

Now checks for files needing saving before close.

Rewrote menus and added translation (see eatext_de.e and eatext_en.e)
Language choice is based on control panel, regional settings (see also
eaxlate.e).

Made the horizontal and vertical scrollbars attach to the edit area, not
the entire window. Added "Permanent Scrollbars" option to reduce screen
flicker when switching tabs. If this is set, the horizontal and vertical
scroll bars, if in use, remain visible, so the window does not need a full
repaint when switching between long/wide sources and short/narrow ones.

Added most of the code for Run (F5), but...

Rewrote capture console output code as discussed on EUforum.
 [I seriously lost the plot here.
  a) ex vs exw vs exwc...
  b) crashes on 2.4 exwc if a gui program...
  c) think I need to start project management to finish this off
  Running a gui program on exwc (2.4) has problems... See:
  --DEV Pete's test for running 2.5 (on C:) not 2.4 (on E:):
  in eacons.ew, and -- WARNING: ReadFile may crash on 2.4:
  in eacons.exw. It works alot better on 2.5 (exwc) than 2.4.
  I will be grateful for any help/full test in this area ;-))
  d) I may have made some desperate/wrong choices here! ]


Version 0.0.7 17/02/2005
========================

Date and time in the status bar now show the locale user default settings
(as set in control panel, regional settings).

Added tab text colourisation to show file requires saving. The tab colour is
properly reset by undo to the exact point of the last file save.

Save as now resets the syntax (if save with a different file extension, esp. if
saving an [untitled] (aka new) file, and also resets the tab bar text.

Some bugs in text selection near the end of a line and in text deletion fixed.

Added context menu to the edit area.

Added Capture console i/o. Pressing F5 runs test2.exw as a demo. [More work is
required to complete the run program logic, esp. save files before run].
Output is in a new re-sizeable message area.


Version 0.0.6 07/02/2005
========================

Fixed a couple of problems with saving the font settings.

New version of arwen with enhanced tabbing between controls and accelerator keys.

Added file save and save as. Binary dumps of files about to be overwritten are
copied to the backups directory (automatically created if it does not exist),
with a file name derived from the year,month,day,hour, and minute (artificially
incremented until it is unique).
You may wish to periodically empty or delete this directory.

Added url highlighting and double click to launch.

Added doubleclick and Ctrl W select word.

Alt '<' added to perform unindent (as well as/equivalent to Shift Tab)
Alt '>' added to perform indent (as well as/equivalent to Ctrl Tab)
Replaced use of alt left/right (was (un)indent); now performs column selection:
Alt left/right now perform column selection,
Ctrl Shift Alt left/right perform column selection by word jump,
Alt mouse move with left mouse button held down performs column selection.
Note that you can switch between normal and column selection mode by releasing the Alt key,
and either pressing Shift (and optionally Ctrl) left/right/up/down or, if the left mouse 
button is still held down, moving the mouse pointer (potentially without moving off the 
letter it is currently on). For example, Alt Page Up and Alt Page Down are ignored; if you
want to perform column select over a number of pages, place the cursor at the start (or end)
of the selection, use Shift Page Up/Down to get roughly around the end of the required
selection, then use Alt up/down/left/right to finish.

Fixed nasty bug in undo/redo when unindent/uncomment partially applied to selected lines.


Version 0.0.5 02/02/2005
========================

Cut    (Ctrl X        or Ctrl Delete)
Cuta        (Ctrl Shift X    or Ctrl Shift Delete)
Copy        (Ctrl C    or Ctrl Insert)
Copya    (Ctrl Shift C        or Ctrl Shift Insert)
Paste    (Ctrl V    or Shift Insert)
Undo (Ctrl Z)
Redo (Ctrl Y)
Select all (Ctrl A)
Duplicate line (Ctrl D)
Word jump (Ctrl leftarrow/rightarrow, with Shift extends selection)
indent (Ctrl Tab [[or Alt rightarrow -- *replaced in 0.0.6 with Alt>*]])
unindent (Shift Tab [[ or Alt leftarrow -- *replaced in 0.0.6 with Alt<*]])
comment (Ctrl '>' or Alt Insert)
uncomment (Ctrl '<' or Alt Delete) [NOT Shift Ins/Del]
insert mode toggle (Insert)
column mode (via variable "columnMode" on line 12 of edita.exw),<br>
ini file: reopen previous files, save window size/pos, options.


Version 0.0.4 26/01/2005
========================


Alpha version. Still no file save, undo/redo...

New since 0.0.3:
cursor + mouse handling largely rewritten
delete, backspace, character&tab insert, home, end, return
indent/unindent
showSpecials (Ctrl+Shift+H) option added
database.e and win32lib sections added to syn/Euphoria.syn
syn load made much more robust.
new syn/None.syn file added
several integers were changed to be atoms.

http://palacebuilders.pwp.blueyonder.co.uk/euphoria.html

A modified copy of arwen is included.
Unpack to any directory and run edita.exw

Thanks to all who responded with bug reports and suggestions.
Some selected replies:

Tommy Carlier wrote:

Juergen Luethje wrote:

>Look how things are done in ConTEXT. ;-)
--Thanks for the tip, I've installed a copy.

>For general purpose usage, the only thing missing for me in ConTEXT is
>automatic highlighting of URLs and making them "clickable" ...
--Interesting idea, this can be done. I've added a list of tokens (ftp,http,
--mailto,...) to the new None.syn file so I'll be able to trap that and 
--process the rest of the url, so I can underline it. I haven't written the
--doubleclick processing (as per MEditor) yet, so I'll do that at the 
same time.
>
>Make everything as simple and straight-forward as possible.
>
>Is it possible to add user-defined sections to a SYN file? People would
>like to add syntax higliting for Win32Lib or ARWEN routines, for global
>routines of their own often used private libraries etc.
Yes. Just add a section (use any name, it is only used on the Colour window) 
starting in column 1 and a bunch of tokens (not in column 1). 
I've copied in sections for win32lib and database.e for 0.0.4
Feel free to rename, split up, or merge the sections, though a .syn file 
from one machine won't work with a .clr file from somewhere else, so start 
by pasting the .clr details into the Scheme section at the end of the .syn,
and deleting the .clr file, which is (over)written one exit from the Colours
window.

-- Draft manual entries

Backup Deletion.
================
[not yet implemented:]
All directories, files, and backups listed on the Recovery tab have a checkbox;
if any are checked the Delete button (also on the Recovery tab) is enabled.
Pressing this button removes either:
    all backups for the specified directory(s), or
    all backups for the specified file(s), or
    any individually selected backup(s).

It is generally a good idea to clean out the backups directory on a regular
basis, say after each proper manual backup, or after a new version is released.
Windows Explorer is probably easier to use for this task than Tools/Recovery. 
The files will naturally be listed in date order (except perhaps at the end of
a decade); which makes it easy to delete all backups say older than a few days.
The Tools/Verify edita.edb option should also be run periodically, and especially
after a manual deletion via Explorer, to tidy things up.
(in a future version I may automatically run it quietly in the background)

The performance of Edita (and indeed the entire machine) may suffer if the
backup directory is left to accumulate too much. Personally I find it fills at
a rate of around 25MB per week.



SciTE on Windows handles command line arguments 
    "-" (read standard input into buffer), 
    "--" (read standard input into output pane) and 
    "-@" (read file names from standard input and open each).
SciTE Export As HTML uses standards compliant CSS.
SciTE Find in Files on Windows can be used in a modeless way and gains a '..' 
button to move up to the parent directory. It is also wider so that longer paths can be seen.


eanotes.txt
(unordered ramblings, some ideas, part dull as dishwater, you get the idea)

Document:
--This is now in the .ini file, see isDebug.
--global constant debug=1    -- set to 1 for quick load: previous files in edita.ini are ignored,
        --            (in fact edita.ini is never rewritten)
        --            single instance checking is turned off.
--global integer debug        -- if set to 0, normal single instance checking, prev files opened, etc. 
--    debug=1    -- if set to 1, //and single instance does NOT find another copy of
        --    Edita already running//, then this is now reset to 0 and previous
        --  files are opened, etc. If single instance checking DOES find
        --  another instance of Edita already running, then previous files
        --  are not opened, edita.ini is not rewritten, etc. That way a 
        --  debug version of edita.exw can invoke itself in debug mode, 
        --  without having to constantly toggle this flag.



...considerably more difficult at the conceptual level than the 236 lines
of code the design produced would ever suggest.

Menu.def:
1) Foreign translation
2) ShortCut key assignment [???]
3) Personal preferences [hide unused entries and shortcut key assignments]
4) User defined tools (sprintf string): %exw (%ex, %exu)    %src
--    Print preview
--    Bind
--    Run (builtin for exw etc)
--    Compare/directory compare [Plain DOS app, full duplex pipe]
--    Find in files (plain eu console app, output caught)
--    Macros/templates???
--    Parse for context help (plain eu app)
--    Reformat (plain app, saves a copy of the file in undo buffer, reloads)
--    SCCS a) restore as standalone gui app
--     b) compress as DOS app with full duplex pipe
--    Options (rewrites edita.ini, [eaini.e shared], reloads)
--    Help (context can be plain DOS app, captured!)
--
"&New\t(Ctrl N)" = "&New\t(Alt N)" [HIDDEN]/[CONTEXT]/[TABMENU]

Actually, I think the best way for translation is to code eg:

    FileMenu = menu(xl("&File"),Main)

which looks up the text on an eds file (if translation is enabled).
ConTEXT uses files which look like they are setting globals...

Spell Checking
==============
See C:\program files\crimson editor\cedt.dic & E:\POSETF\POSETF\test\demos\words.txt.
possibly: store abort aborted aborting abortion abortions aborts as:
abort{ed,ing,ion{s},s}, and 
accommodate accommodated accommodates accommodating accommodation accommodations 
should be: accommodate{d,s} accommodating accommodation{s}
rather than the much harder:
abort{,ed,ing,ion{s},s}, and 
accommodat{e{d,s},i{ng,on{,s}}
ie, the root must always be a real word, to avoid:
a{,a{,rdvark{,s},ron},b{a{ck,cus{es},ft,ndon{ed,ing,ment,s},s{e{d},ment,s...
(probably the root should be length>=4, or check for some sensible limit
on the number of derived words (eg 10)).
The easy way to do this is to load a ternary tree with child counts.
The important thing is of course re-loading that ternary tree.

Yes, using globals.

Some tips (don't worry if you don't grasp all this in one sitting).
The second half of this should answer your question:

Try to keep all data local, for example it is generally better to code:
    integer Flag
    global procedure setFlag(integer newValue)
    Flag=newValue
    end procedure
    global function getFlag()
    return Flag
    end function

than it is to just code:
    global integer Flag

The reason for this is often called "pollution of the global namespace",
which I will come back to in a moment. First, though, you need to understand 
something called "scope", which is:

    for loop
    routine
    file
    global

What on earth does that mean? It means three things:

First, when Phix/Euphoria is compiling/interpreting your program, and processing a 
line such as "if i=5 then", it first looks for the variable i in the surrounding
for loop(s), then in the parameters and local variables of the current routine,
then among the variables defined locally in the current source file (NB: whether
or not they are global), and finally in the global pool.

Secondly, it means that it is legal to define hundreds of variables called i,
provided they are defined at different scope levels, with the small catch that
you cannot define another i in the for loop scope if it has already been defined
at the routine level or a surrounding for loop scope, nor can you define both a 
local (file-level) i and a global i in the same source file.

Thirdly, if there is more than one global definition of "i", it must be referred
to using a namespace qualifier. Ideally, you would ensure than all global names
are unique, however as the application grows, it becomes increasingly difficult,
if not outright impossible, to remember the names of all globals throught the
system. Going back to the phrase "pollution of the global namespace", we find
that having duplicate global routines is far easier to manage than duplicate 
global data names. Why? Well, compare the following two coding errors:

    --integer Flag    -- we "forgot" this
    Flag = 1
vs:
    --procedure setFlag(...)    -- we "forgot" this
    setFlag(1)

Now, as they stand, both these will do exactly the same thing, namely trash the
"Flag" variable defined months or years ago in an entirely different source file,
and hence cause the new code to break old code, sometimes in a very subtle
unnoticed way. However, it is simply much less likely that a programmer will
make the second error, ie call a routine without realising it is in another
module. It probably also has something to do with the fact that most programs 
have many more data variables than routines, and secondly that routines only
have two possible scopes (file and global), not four.


Lastly, getting back to the question actually asked, a word or two on namespaces, 
something I almost never use, but probably should. You are not forced to use 
namespaces if the global is unique, but it is usually a good idea to do so anyway. 
Suppose that:

    fonts.e defines global Initialise(), and 
    colours.e also defines global Initialise()

Any and all calling programs should:

    include fonts.e as fonts
    include colours.e as colours

    ...
    fonts:Initialise()
    ...

    colours:Initialise()

If you write the fonts routine first, and call it without qualifiers, you may find
yourself adding them later, or worse, rename the second as InitialiseColours() and
change it in 6 places it is called from, but miss one. I believe that much of the
grief people have with globals (myself included) stems from not using namespaces
as a matter of habit (but let's not get into an argument about that).

It is also possible to have eg:

    main.exw:
    global procedure redraw()

    include fonts.e as fonts

and
    fonts.e:
    include main.exw as main

    main:redraw()

Even though fonts.e can only "see" globals defined in main.exw before the 
include fonts.e statement. The include main.e line does not create another
copy of the routines and data, it merely allows reference via the main:
qualifier.

>A: It supported drag 'n' drop file opening. (This is fairly easy to implem=
ent, I think)
Oops, there was a missing flag. Change is to line 199 of editor.exw:
      {WS_EX_CLIENTEDGE,WS_EX_ACCEPTFILES}

>B: If you restricted editor.exe to a single instance.
This works fine here. You do have single instance checked on the
options menu, I assume. One known "feature" is that the editor.ini
file is not saved until the editor is closed. I should fix that.

>Last but not least... how is it that 'parse for context sensitive
>help' is stored? It keeps forgetting....
Bad design ;-(( It dumps the info into glocals.exh and/or
win32lib.exh. These files are kept in the same directory as
editor.exw, and are scratched every time parse for globals is run. 
Along with the hand-written builtins.exh they are loaded once, at
editor start-up. This info would be much better off being stored in an
edb file (or three). [[ AND in the .syn file ]]


CAPTURING CONSOLE STANDARD OUTPUT
=================================
[OLD, OUT OF DATE] **DEV
The windows API does not permit asynchronous console i/o capture, nor is it
possible to redirect standard error output in windows, at least not 95/98.
For example, run dir /k from a DOS prompt and try to send the error message
("Invalid switch -/K") into a file. It cannot be done (on windows 98).

I have attempted to capture asynchronous console i/o using Anonymous Pipes, 
Named Pipes, and Mailslots, and found that i/o handles such as those from 
an anonymous pipe may be inherited, but any use of FILE_FLAG_OVERLAPPED 
(to permit non-blocked i/o) is not inheritable. Thus all attempts to record
interactive i/o result in the editor being left blocked on a ReadFile call
which will never return and cannot be terminated (without also terminating
the editor).

Hence you should only attempt to capture console output    from a program which
does not accept input and does not display any error messages, unless the 
input is fixed and can be supplied from a file.

It is possible to redirect standard input to getc(0), gets(0), get(0),
prompt_string(prompt), prompt_number(prompt, range), and get_bytes(0, n), but 
not to get_key() or wait_key(). This is a "feature" of Phix/Euphoria.
(You may wish to test this with a simple program, invoked from a DOS prompt
 using something like "exw test.exw < input.txt")

There are two methods of redirecting console i/o:
The first is to invoke the program using 
    system("ex[w[c]] program.ex[w] < input.txt > output.txt",2)
And the second is to use CreateProcess and use Anonymous pipes (see eacons.ew),
in which case the output is automatically shown in the message area of edita.
Neither method can reliably trap Euphoria error messages, however the latter
is able to detect an error (after the user has keyed Enter to the standard
error message prompt) and will attempt to jump to the line in error.
(For Phix, modify say pmsgs.e/peama.e, if rqd)

Press <Ctrl F5> to run the program via a dialog which allows the exact method
to be selected. Press <Ctrl Shift F5> to repeat the last program invocation.
This is particularly useful when editing an include file rather than the main
program.


Show Line Length Errors
=======================
This ini option should be left set to 0. Internally, the editor maintains a 
table of line lengths (eg there are 37 lines of length 23, 45 of length 24..)
which it uses to control the display of the horizontal scroll bar. There is
some internal testing code to ensure this table is correct (see TestLL() in
edita.exw), however any errors/warnings are probably irrelevant to most users.
This flag (and the corresponding run-time error message) exist solely for 
development benefit. It is recommended that anyone modifying the source code
turns this feature on (it comes with a small performance penalty), but all 
live users should leave this feature disabled.
[9/11/2005: TestLL() and associated code have been commented out]

Line Lengths in Error [DEV remove this section? see above]
=====================
This error is unlikely to occur and is documented for completeness only.

This message may appear if the internal table of line lengths does not match
the current text. The error is not significant, this internal table only 
governs the display of the horizontal scroll bar. The error is automatically 
corrected whenever it is found. The error will not appear more than once per 
edit session.

The error can be permanently removed by setting "Show Line Length Errors" in
the edita.ini file to 0 (the default). Note that this flag is only intended
for development use and will severely degrade performance on large files (if
set to 1).

For an error report to be useful, the exact steps required to reproduce the
problem are required, failing that if the error can be reproduced on a small
file (so that all actions and the full text of the file appear in an ex.err
dump, which may not occur if more than one file is open), then please send 
me the full 
